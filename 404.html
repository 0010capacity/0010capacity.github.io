<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // GitHub Pages SPA fallback (Next.js static export + trailingSlash)
      // Stores the current path and redirects to "/" (exported as /index.html)
      // The main app will restore the route on load.
      (function () {
        var pathSegmentsToKeep = 0;

        var l = window.location;
        var path = l.pathname.slice(1);
        var search = l.search;
        var hash = l.hash;

        // Store the original path in sessionStorage.
        // Normalize to the exported trailing-slash form so that static export can match "/path/" -> "/path/index.html".
        // e.g. "/novels/slug" -> "/novels/slug/"
        var restoredPath = "/" + path;
        if (restoredPath !== "/" && restoredPath.slice(-1) !== "/") {
          restoredPath = restoredPath + "/";
        }

        sessionStorage.setItem(
          "spa-redirect",
          JSON.stringify({
            path: restoredPath,
            search: search,
            hash: hash,
          })
        );

        // Redirect to root
        l.replace(
          l.protocol +
            "//" +
            l.hostname +
            (l.port ? ":" + l.port : "") +
            l.pathname
              .split("/")
              .slice(0, 1 + pathSegmentsToKeep)
              .join("/") +
            "/" +
            "?spa-redirect=true"
        );
      })();
    </script>
  </head>
  <body>
    <noscript>
      <p>JavaScript is required for this application.</p>
      <p><a href="/">Go to homepage</a></p>
    </noscript>
  </body>
</html>
