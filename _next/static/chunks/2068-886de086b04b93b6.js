(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2068],{253:t=>{t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},1990:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Instrument=void 0;var i=n(49989),s=new WeakMap;e.Instrument=function(){function t(t,e){if(this.number=0,s.set(this,e),this.number=0,t){var n=t.find(function(t){return"programChange"===t.type});n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?i.DrumKitByPatchID[this.number]:i.instrumentByPatchID[this.number]},set:function(t){var e=i.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":i.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){return 9===s.get(this).channel},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(t){this.number=t.number},t}()},2068:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},2852:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(t,n){return t[e.controlChangeNames[n]]=n,t},{});var n=new WeakMap,i=new WeakMap,s=function(){function t(t,e){n.set(this,e),i.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"number",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=s},3259:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var i={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"}},3439:(t,e,n)=>{"use strict";function i(t,e){return 0===e.length?t:e.reduce((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e)}n.d(e,{findClosestNumber:()=>i})},7398:(t,e,n)=>{var i=n(80797);function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,i(s.key),s)}}t.exports=function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},10113:function(t,e,n){(function(t,e,n,i){"use strict";var s=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},r=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},a=function(t,e){return{startTime:e,type:"setValue",value:t}},o=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},l=function(t,e,n){var i=n.startTime,s=n.target;return s+(e-s)*Math.exp((i-t)/n.timeConstant)},u=function(t){return"exponentialRampToValue"===t.type},h=function(t){return"linearRampToValue"===t.type},c=function(t){return u(t)||h(t)},p=function(t){return"setValue"===t.type},d=function(t){return"setValueCurve"===t.type},f=function(t,e,n,i){var s=t[e];return void 0===s?i:c(s)||p(s)?s.value:d(s)?s.values[s.values.length-1]:l(n,f(t,e-1,s.startTime,i),s)},m=function(t,e,n,i,s){return void 0===n?[i.insertTime,s]:c(n)?[n.endTime,n.value]:p(n)?[n.startTime,n.value]:d(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(t,e-1,n.startTime,s)]},g=function(t){return"cancelAndHold"===t.type},v=function(t){return"cancelScheduledValues"===t.type},y=function(t){return g(t)||v(t)?t.cancelTime:u(t)||h(t)?t.endTime:t.startTime},b=function(t,e,n,i){var s=i.endTime,r=i.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(s-e)):0},x=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},w=function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},T=function(t,e){var n=e.duration,i=e.startTime,s=e.values,r=(t-i)/n*(s.length-1);return w(s,r)},k=function(t){return"setTarget"===t.type};t.AutomationEventList=i(function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=y(t);if(g(t)||v(t)){var n=this._automationEvents.findIndex(function(n){return v(t)&&d(n)?n.startTime+n.duration>=e:y(n)>=e}),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(t)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&c(i)){if(void 0!==l&&k(l))throw Error("The internal list is malformed.");var p=void 0===l?i.insertTime:d(l)?l.startTime+l.duration:y(l),f=void 0===l?this._defaultValue:d(l)?l.values[l.values.length-1]:l.value,m=u(i)?b(e,p,f,i):x(e,p,f,i),w=u(i)?s(m,e,this._currenTime):r(m,e,this._currenTime);this._automationEvents.push(w)}if(void 0!==l&&k(l)&&this._automationEvents.push(a(this.getValue(e),e)),void 0!==l&&d(l)&&l.startTime+l.duration>e){var T=e-l.startTime,C=(l.values.length-1)/l.duration,A=Math.max(2,1+Math.ceil(T*C)),S=T/(A-1)*C,O=l.values.slice(0,A);if(S<1)for(var M=1;M<A;M+=1){var I=S*M%1;O[M]=l.values[M-1]*(1-I)+l.values[M]*I}this._automationEvents[this._automationEvents.length-1]=o(O,l.startTime,T)}}}else{var E=this._automationEvents.findIndex(function(t){return y(t)>e}),D=-1===E?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[E-1];if(void 0!==D&&d(D)&&y(D)+D.duration>e)return!1;var R=u(t)?s(t.value,t.endTime,this._currenTime):h(t)?r(t.value,e,this._currenTime):t;if(-1===E)this._automationEvents.push(R);else{if(d(t)&&e+t.duration>y(this._automationEvents[E]))return!1;this._automationEvents.splice(E,0,R)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return y(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];k(i)&&n.unshift(a(f(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(e){return y(e)>t}),i=this._automationEvents[n],s=(-1===n?this._automationEvents.length:n)-1,r=this._automationEvents[s];if(void 0!==r&&k(r)&&(void 0===i||!c(i)||i.insertTime>t))return l(t,f(this._automationEvents,s-1,r.startTime,this._defaultValue),r);if(void 0!==r&&p(r)&&(void 0===i||!c(i)))return r.value;if(void 0!==r&&d(r)&&(void 0===i||!c(i)||r.startTime+r.duration>t))return t<r.startTime+r.duration?T(t,r):r.values[r.values.length-1];if(void 0!==r&&c(r)&&(void 0===i||!c(i)))return r.value;if(void 0!==i&&u(i)){var a=e(m(this._automationEvents,s,r,i,this._defaultValue),2);return b(t,a[0],a[1],i)}if(void 0!==i&&h(i)){var o=e(m(this._automationEvents,s,r,i,this._defaultValue),2);return x(t,o[0],o[1],i)}return this._defaultValue}}]),t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=a,t.createSetValueCurveAutomationEvent=o})(e,n(48358),n(50954),n(7398))},12362:t=>{function e(){this.buffer=[]}e.prototype.writeUInt8=function(t){this.buffer.push(255&t)},e.prototype.writeInt8=e.prototype.writeUInt8,e.prototype.writeUInt16=function(t){this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt16=e.prototype.writeUInt16,e.prototype.writeUInt24=function(t){this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt24=e.prototype.writeUInt24,e.prototype.writeUInt32=function(t){this.writeUInt8(t>>24&255),this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt32=e.prototype.writeUInt32,e.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},e.prototype.writeString=function(t){var e,n=t.length,i=[];for(e=0;e<n;e++)i.push(t.codePointAt(e));this.writeBytes(i)},e.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(127&e),e>>=7;e;){var i=127&e|128;n.push(i),e>>=7}this.writeBytes(n.reverse())}},e.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,n){if("object"!=typeof t)throw"Invalid MIDI data";n=n||{};var i,s,r,a,o,l,u,h=t.header||{},c=t.tracks||[],p=c.length,d=new e;for(i=d,s=h,r=p,a=null==s.format?1:s.format,o=128,s.timeDivision?o=s.timeDivision:s.ticksPerFrame&&s.framesPerSecond?o=-(255&s.framesPerSecond)<<8|255&s.ticksPerFrame:s.ticksPerBeat&&(o=32767&s.ticksPerBeat),(l=new e).writeUInt16(a),l.writeUInt16(r),l.writeUInt16(o),i.writeChunk("MThd",l.buffer),u=0;u<p;u++)!function(t,n,i){var s,r=new e,a=n.length,o=null;for(s=0;s<a;s++)!1!==i.running&&(i.running||n[s].running)||(o=null),o=function(t,e,n,i){var s=e.type,r=e.deltaTime,a=e.text||"",o=e.data||[],l=null;switch(t.writeVarInt(r),s){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(a.length),t.writeString(a);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(a.length),t.writeString(a);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(a.length),t.writeString(a);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(a.length),t.writeString(a);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(a.length),t.writeString(a);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(a.length),t.writeString(a);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(a.length),t.writeString(a);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var u=31&e.hour|({24:0,25:32,29:64,30:96})[e.frameRate];t.writeUInt8(u),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var h=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(h),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(o.length),t.writeBytes(o);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(o.length),t.writeBytes(o));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(o.length),t.writeBytes(o);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(o.length),t.writeBytes(o);break;case"noteOff":(l=(!1!==i&&e.byte9||i&&0==e.velocity?144:128)|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(l=144|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(l=160|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(l=176|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(l=192|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(l=208|e.channel)!==n&&t.writeUInt8(l),t.writeUInt8(e.amount);break;case"pitchBend":(l=224|e.channel)!==n&&t.writeUInt8(l);var c=8192+e.value;t.writeUInt8(127&c),t.writeUInt8(c>>7&127);break;default:throw"Unrecognized event type: "+s}return l}(r,n[s],o,i.useByte9ForNoteOff);t.writeChunk("MTrk",r.buffer)}(d,c[u],n);return d.buffer}},16253:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]])},17764:(t,e,n)=>{"use strict";n.d(e,{ActionIconGroup:()=>d});var i=n(95155),s=n(28428);n(12115);var r=n(80533),a=n(23653),o=n(39398),l=n(67623),u=n(91853),h=n(3259);let c={orientation:"horizontal"},p=(0,r.createVarsResolver)((t,e)=>{let{borderWidth:n}=e;return{group:{"--ai-border-width":(0,s.D)(n)}}}),d=(0,u.factory)((t,e)=>{let n=(0,a.useProps)("ActionIconGroup",c,t),{className:s,style:r,classNames:u,styles:d,unstyled:f,orientation:m,vars:g,borderWidth:v,variant:y,mod:b,attributes:x,...w}=(0,a.useProps)("ActionIconGroup",c,t),T=(0,o.useStyles)({name:"ActionIconGroup",props:n,classes:h.A,className:s,style:r,classNames:u,styles:d,unstyled:f,attributes:x,vars:g,varsResolver:p,rootSelector:"group"});return(0,i.jsx)(l.Box,{...T("group"),ref:e,variant:y,mod:[{"data-orientation":m},b],role:"group",...w})});d.classes=h.A,d.displayName="@mantine/core/ActionIconGroup"},21110:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n="ticks");var i=0,s=t.length,r=s;if(s>0&&t[s-1][n]<=e)return s-1;for(;i<r;){var a=Math.floor(i+(r-i)/2),o=t[a],l=t[a+1];if(o[n]===e){for(var u=a;u<t.length;u++)t[u][n]===e&&(a=u);return a}if(o[n]<e&&l[n]>e)return a;o[n]>e?r=a:o[n]<e&&(i=a+1)}return -1}Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.search=void 0,e.search=n,e.insert=function(t,e,i){if(void 0===i&&(i="ticks"),t.length){var s=n(t,e[i],i);t.splice(s+1,0,e)}else t.push(e)}},21490:(t,e,n)=>{"use strict";n.d(e,{g:()=>o});var i=n(95155),s=n(12115),r=n(67623),a=n(25063);let o=(0,s.forwardRef)((t,e)=>{let{size:n,disabled:s,variant:o,color:l,thumbSize:u,radius:h,...c}=t,{getStyles:p}=(0,a.s)();return(0,i.jsx)(r.Box,{tabIndex:-1,variant:o,size:n,ref:e,...p("root"),...c})});o.displayName="@mantine/core/SliderRoot"},22182:(t,e,n)=>{"use strict";n.d(e,{z:()=>l});var i=n(95155),s=n(12115),r=n(67623),a=n(63652),o=n(25063);let l=(0,s.forwardRef)((t,e)=>{let{max:n,min:l,value:u,position:h,label:c,dragging:p,onMouseDown:d,onKeyDownCapture:f,labelTransitionProps:m,labelAlwaysOn:g,thumbLabel:v,onFocus:y,onBlur:b,showLabelOnHover:x,isHovered:w,children:T=null,disabled:k}=t,{getStyles:C}=(0,o.s)(),[A,S]=(0,s.useState)(!1),O=g||p||A||x&&w;return(0,i.jsxs)(r.Box,{tabIndex:0,role:"slider","aria-label":v,"aria-valuemax":n,"aria-valuemin":l,"aria-valuenow":u,ref:e,__vars:{"--slider-thumb-offset":"".concat(h,"%")},...C("thumb",{focusable:!0}),mod:{dragging:p,disabled:k},onFocus:t=>{S(!0),"function"==typeof y&&y(t)},onBlur:t=>{S(!1),"function"==typeof b&&b(t)},onTouchStart:d,onMouseDown:d,onKeyDownCapture:f,onClick:t=>t.stopPropagation(),children:[T,(0,i.jsx)(a.Transition,{mounted:null!=c&&!!O,transition:"fade",duration:0,...m,children:t=>(0,i.jsx)("div",{...C("label",{style:t}),children:c})})]})});l.displayName="@mantine/core/SliderThumb"},23924:(t,e,n)=>{"use strict";n.d(e,{ActionIconGroupSection:()=>p});var i=n(95155);n(12115);var s=n(49957),r=n(80533),a=n(23653),o=n(39398),l=n(67623),u=n(91853),h=n(3259);let c=(0,r.createVarsResolver)((t,e)=>{let{radius:n,color:i,gradient:r,variant:a,autoContrast:o,size:l}=e,u=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:r,variant:a||"filled",autoContrast:o});return{groupSection:{"--section-height":(0,s.getSize)(l,"section-height"),"--section-padding-x":(0,s.getSize)(l,"section-padding-x"),"--section-fz":(0,s.getFontSize)(l),"--section-radius":void 0===n?void 0:(0,s.getRadius)(n),"--section-bg":i||a?u.background:void 0,"--section-color":u.color,"--section-bd":i||a?u.border:void 0}}}),p=(0,u.factory)((t,e)=>{let n=(0,a.useProps)("ActionIconGroupSection",null,t),{className:s,style:r,classNames:u,styles:p,unstyled:d,vars:f,variant:m,gradient:g,radius:v,autoContrast:y,attributes:b,...x}=n,w=(0,o.useStyles)({name:"ActionIconGroupSection",props:n,classes:h.A,className:s,style:r,classNames:u,styles:p,unstyled:d,attributes:b,vars:f,varsResolver:c,rootSelector:"groupSection"});return(0,i.jsx)(l.Box,{...w("groupSection"),ref:e,variant:m,...x})});p.classes=h.A,p.displayName="@mantine/core/ActionIconGroupSection"},24633:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createControlChanges=void 0;var i=n(2852);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:i.controlChangeIds.hasOwnProperty(e)?t[i.controlChangeIds[e]]:void 0},set:function(t,e,n){return i.controlChangeIds.hasOwnProperty(e)?t[i.controlChangeIds[e]]=n:t[e]=n,!0}})}},25063:(t,e,n)=>{"use strict";n.d(e,{h:()=>s,s:()=>r}),n(12115);var i=n(24655);n(95155);let[s,r]=(0,i.createSafeContext)("SliderProvider was not found in tree")},25959:(t,e,n)=>{"use strict";n.d(e,{v:()=>a});var i=n(12115);let s=t=>{let e,n=new Set,i=(t,i)=>{let s="function"==typeof t?t(e):t;if(!Object.is(s,e)){let t=e;e=(null!=i?i:"object"!=typeof s||null===s)?s:Object.assign({},e,s),n.forEach(n=>n(e,t))}},s=()=>e,r={setState:i,getState:s,getInitialState:()=>a,subscribe:t=>(n.add(t),()=>n.delete(t))},a=e=t(i,s,r);return r},r=t=>{let e=(t=>t?s(t):s)(t),n=t=>(function(t,e=t=>t){let n=i.useSyncExternalStore(t.subscribe,i.useCallback(()=>e(t.getState()),[t,e]),i.useCallback(()=>e(t.getInitialState()),[t,e]));return i.useDebugValue(n),n})(e,t);return Object.assign(n,e),n},a=t=>t?r(t):r},26894:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},29060:(t,e,n)=>{"use strict";let i,s,r,a;n.d(e,{dJ:()=>sM,eS:()=>sP,Bh:()=>sR,RG:()=>sS,fS:()=>iK,F4:()=>iA,SD:()=>ik,oD:()=>sB,ni:()=>iC});let o="15.1.22";var l,u,h,c=n(10113);let p=new WeakSet,d=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,x=new WeakMap,w=new WeakMap,T={construct:()=>T},k=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,C=(t,e)=>{let n=[],i=t.replace(/^[\s]+/,""),s=i.match(k);for(;null!==s;){let t=s[1].slice(1,-1),r=s[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=(i=i.slice(s[0].length).replace(/^[\s]+/,"")).match(k)}return[n.join(";"),i]},A=t=>{if(void 0!==t&&!Array.isArray(t))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},S=t=>{if(!(t=>{try{new new Proxy(t,T)}catch{return!1}return!0})(t))throw TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},O=(t,e)=>{let n=t.get(e);if(void 0===n)throw Error("A value with the given key could not be found.");return n},M=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");let[i]=n;return t.delete(i),i},I=(t,e,n,i)=>{let s=O(t,e),r=M(s,t=>t[0]===n&&t[1]===i);return 0===s.size&&t.delete(e),r},E=t=>O(y,t),D=t=>{if(p.has(t))throw Error("The AudioNode is already stored.");p.add(t),E(t).forEach(t=>t(!0))},R=t=>{if(!p.has(t))throw Error("The AudioNode is not stored.");p.delete(t),E(t).forEach(t=>t(!1))},N=(t,e)=>{!("port"in t)&&e.every(t=>0===t.size)&&R(t)},V={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},P=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},q=()=>new DOMException("","IndexSizeError"),U=t=>{let e;e=t.getChannelData,t.getChannelData=n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw q();throw t}}},F={numberOfChannels:1},j=t=>p.has(t),B={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},L=t=>O(d,t),W=t=>O(m,t),z=(t,e)=>{let{activeInputs:n}=L(t);for(let i of(n.forEach(n=>n.forEach(([n])=>{e.includes(t)||z(n,[...e,t])})),"playbackRate"in t?[t.playbackRate]:"port"in t?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:"offset"in t?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t&&!("gain"in t))(t)?[t.detune,t.frequency]:"pan"in t?[t.pan]:[])){let t=W(i);void 0!==t&&t.activeInputs.forEach(([t])=>z(t,e))}j(t)&&R(t)},H=t=>{z(t.destination,[])},G=t=>"context"in t[0],X=(t,e,n,i)=>{for(let e of t)if(n(e)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Y=(t,e,[n,i],s)=>{X(t,[e,n,i],t=>t[0]===e&&t[1]===n,s)},Z=(t,[e,n,i],s)=>{let r=t.get(e);void 0===r?t.set(e,new Set([[n,i]])):X(r,[n,i],t=>t[0]===n,s)},$=(t,e,n,i)=>{if("inputs"in e){let s=e.inputs[i];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,i),[e,n,i]},Q=(t,e,n)=>{for(let i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},J=(t,e)=>{if(!E(t).delete(e))throw Error("Missing the expected event listener.")},K=(t,e,n)=>{let i=O(t,e),s=M(i,t=>t[0]===n);return 0===i.size&&t.delete(e),s},tt=(t,e,n,i)=>{"inputs"in e?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},te=t=>O(f,t),tn=t=>O(g,t),ti=t=>b.has(t),ts=t=>!p.has(t),tr=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{let e=t.createScriptProcessor(256,1,1),i=t.createGain(),s=t.createBuffer(1,2,44100),r=s.getChannelData(0);r[0]=1,r[1]=1;let a=t.createBufferSource();a.buffer=s,a.loop=!0,a.connect(e).connect(t.destination),a.connect(i),a.disconnect(i),e.onaudioprocess=i=>{let s=i.inputBuffer.getChannelData(0);Array.prototype.some.call(s,t=>1===t)?n(!0):n(!1),a.stop(),e.onaudioprocess=null,a.disconnect(e),e.disconnect(t.destination)},a.start()}}),ta=(t,e)=>{let n=new Map;for(let e of t)for(let t of e){let e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},to=t=>"context"in t,tl=(t,e,n,i,s)=>{let[r,a]=((t,e,n,i)=>{let{activeInputs:s,passiveInputs:r}=L(e),a=Q(s[i],t,n);return null===a?[I(r,t,n,i)[2],!1]:[a[2],!0]})(t,n,i,s);if(null!==r&&(J(t,r),!a||e||ti(t)||tt(te(t),te(n),i,s)),j(n)){let{activeInputs:t}=L(n);N(n,t)}},tu=(t,e,n,i)=>{let[s,r]=((t,e,n)=>{let{activeInputs:i,passiveInputs:s}=W(e),r=Q(i,t,n);return null===r?[K(s,t,n)[1],!1]:[r[2],!0]})(t,n,i);null!==s&&(J(t,s),!r||e||ti(t)||te(t).disconnect(tn(n),i))};class th{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,i)=>t.call(e,n,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}let tc={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function tp(t,e,n,i,s){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,s);else{let r=t.getChannelData(i);if(0===e[n].byteLength)e[n]=r.slice(s,s+128);else{let t=new Float32Array(r.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}let td=(t,e,n,i,s)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,s):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],s)},tf=(t,e)=>{let n=[];for(let i=0;i<t;i+=1){let t=[],s="number"==typeof e?e:e[i];for(let e=0;e<s;e+=1)t.push(new Float32Array(128));n.push(t)}return n},tm=async(t,e,n,i,s,r,a)=>{let o=null===e?128*Math.ceil(t.context.length/128):e.length,l=i.channelCount*i.numberOfInputs,u=s.reduce((t,e)=>t+e,0),h=0===u?null:n.createBuffer(u,o,n.sampleRate);if(void 0===r)throw Error("Missing the processor constructor.");let c=L(t),p=await ((t,e)=>{let n=O(w,t);return O(n,te(e))})(n,t),d=tf(i.numberOfInputs,i.channelCount),f=tf(i.numberOfOutputs,s),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let u=0;u<o;u+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)tp(e,d[t],n,n,u);void 0!==r.parameterDescriptors&&null!==e&&r.parameterDescriptors.forEach(({name:t},n)=>{tp(e,m,t,l+n,u)});for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<s[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{let t=d.map((t,e)=>0===c.activeInputs[e].size?[]:t),e=a(u/n.sampleRate,n.sampleRate,()=>p.process(t,f,m));if(null!==h)for(let t=0,e=0;t<i.numberOfOutputs;t+=1){for(let n=0;n<s[t];n+=1)td(h,f[t],n,e+n,u);e+=s[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return h},t_={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tv={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ty={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tb={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tx=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{let s=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},tw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},tT=(t,e,n)=>{let i=e[n];if(void 0===i)throw t();return i},tk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},tC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},tA=()=>new DOMException("","InvalidStateError"),tS=()=>new DOMException("","InvalidAccessError"),tO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},tM=(t,e,n,i,s,r,a,o,l,u,h)=>{let c=u.length,p=o;for(let o=0;o<c;o+=1){let c=n[0]*u[o];for(let e=1;e<s;e+=1){let i=p-e&l-1;c+=n[e]*r[i],c-=t[e]*a[i]}for(let t=s;t<i;t+=1)c+=n[t]*r[p-t&l-1];for(let n=s;n<e;n+=1)c-=t[n]*a[p-n&l-1];r[p]=u[o],a[p]=c,p=p+1&l-1,h[o]=c}return p},tI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},tE=t=>{let e=new Uint32Array([0x46464952,40,0x45564157,0x20746d66,16,131073,44100,176400,1048580,0x61746164,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});if(void 0===n)return!1;return n.catch(()=>{}),!0}catch{}return!1},tD=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},tR=(t,e)=>{tD(t,e,"channelCount"),tD(t,e,"channelCountMode"),tD(t,e,"channelInterpretation")},tN=t=>"function"==typeof t.getFloatTimeDomainData,tV=(t,e,n)=>{let i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},tP=t=>{let e;e=t.start,t.start=(n=0,i=0,s)=>{if("number"==typeof s&&s<0||i<0||n<0)throw RangeError("The parameters can't be negative.");e.call(t,n,i,s)}},tq=t=>{let e;e=t.stop,t.stop=(n=0)=>{if(n<0)throw RangeError("The parameter can't be negative.");e.call(t,n)}},tU=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),tF=async(t,e)=>new t(await new Promise((t,n)=>{let{port1:i,port2:s}=new MessageChannel;i.onmessage=({data:e})=>{i.close(),s.close(),t(e)},i.onmessageerror=({data:t})=>{i.close(),s.close(),n(t)},s.postMessage(e)})),tj=(t,e)=>{let n=t.createBiquadFilter();return tR(n,e),tV(n,e,"Q"),tV(n,e,"detune"),tV(n,e,"frequency"),tV(n,e,"gain"),tD(n,e,"type"),n},tB=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return tR(n,e),(t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw tA()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw tA()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw tA()}})})(n),n},tL=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),tW=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return tR(n,e),tV(n,e,"delayTime"),n},tz=(t,e)=>{let n=t.createGain();return tR(n,e),tV(n,e,"gain"),n};function tH(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1){var i;n=[(i=n)[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]],n[0]+=t[s]}return n}let tG=(t,e,n,i)=>t.createScriptProcessor(e,n,i),tX=()=>new DOMException("","NotSupportedError"),tY={numberOfChannels:1},tZ={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},t$={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},tQ={disableNormalization:!1},tJ={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},tK=()=>new DOMException("","UnknownError"),t0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},t1=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),t2=t=>{if(null===t)return!1;let e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},t8=(t,e,n,i)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);let{get:r,set:a}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(r),set:i(a)})},t3=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;t3(t,e,n+1e-7)}},t4=t=>{let e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},t5=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},t6=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},t7=(t,e)=>{let n,i=e.createGain();t.connect(i);let s=(n=t.disconnect,()=>{n.call(t,i),t.removeEventListener("ended",s)});t.addEventListener("ended",s),tL(t,i),t.stop=(e=>{let n=!1;return (s=0)=>{if(n)try{e.call(t,s)}catch{i.gain.setValueAtTime(0,s)}else e.call(t,s),n=!0}})(t.stop)},t9=(t,e)=>n=>{let i={value:t};return(Object.defineProperties(n,{currentTarget:i,target:i}),"function"==typeof e)?e.call(t,n):e.handleEvent.call(t,n)},et=(t,e,[n,i,s],r)=>{X(t[i],[e,n,s],t=>t[0]===e&&t[1]===n,r)},ee=(t,e,[n,i,s],r)=>{let a=t.get(n);void 0===a?t.set(n,new Set([[i,e,s]])):X(a,[i,e,s],t=>t[0]===i&&t[1]===e,r)},en=(t,e,n,i)=>M(t[i],t=>t[0]===e&&t[1]===n),ei=new WeakMap,es=t=>{var e;return null!=(e=ei.get(t))?e:0},er=((t,e)=>(n,i)=>{let s=e.get(n);if(void 0!==s)return s;let r=t.get(n);if(void 0!==r)return r;try{let s=i();if(s instanceof Promise)return t.set(n,s),s.catch(()=>!1).then(i=>(t.delete(n),e.set(n,i),i));return e.set(n,s),s}catch{return e.set(n,!1),!1}})(new Map,new WeakMap),ea="undefined"==typeof window?null:window,eo=(t,e)=>{let n=t.createAnalyser();if(tR(n,e),!(e.maxDecibels>e.minDecibels))throw q();return tD(n,e,"fftSize"),tD(n,e,"maxDecibels"),tD(n,e,"minDecibels"),tD(n,e,"smoothingTimeConstant"),er(tN,()=>tN(n))||(t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=(n[t]-128)*.0078125;return e}})(n),n},el=t=>{let e=L(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},eu=((t,e,n)=>async(i,s,r)=>{let a=t(i);await Promise.all(a.activeInputs.map((t,a)=>Array.from(t).map(async([t,o])=>{let l=e(t),u=await l.render(t,s),h=i.context.destination;n(t)||i===h&&n(i)||u.connect(r,o,a)})).reduce((t,e)=>[...t,...e],[]))})(L,el,ti),eh=()=>{let t=new WeakMap,e=async(e,n)=>{let i=te(e);return i.context!==n&&(i=eo(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant})),t.set(n,i),await eu(e,n,i),i};return{render(n,i){let s=t.get(i);return void 0!==s?Promise.resolve(s):e(n,i)}}},ec=t=>{let e=v.get(t);if(void 0===e)throw tA();return e},ep=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(ea),ed=(t=>e=>null!==t&&e instanceof t)(ep),ef=new WeakMap,em=class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let i=this._listeners.get(e);void 0===i&&(i=t9(this,e),"function"==typeof e&&this._listeners.set(e,i)),this._nativeEventTarget.addEventListener(t,i,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){let i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}},e_=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(ea),eg=(t=>e=>null!==t&&e instanceof t)(e_),ev=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(ea),ey=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(ea),eb=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(ea),ex=((t,e,n,i,s,r,a,o,l,u,h,c,p,d,m,g)=>class extends u{constructor(e,i,s,r){super(s),this._context=e,this._nativeAudioNode=s;let a=h(e);c(a)&&!0!==n(tr,()=>tr(a,g))&&(t=>{let e,n=new Map;t.connect=(t=>(e,i=0,s=0)=>{let r=to(e)?t(e,i,s):t(e,i),a=n.get(e);return void 0===a?n.set(e,[{input:s,output:i}]):a.every(t=>t.input!==s||t.output!==i)&&a.push({input:s,output:i}),r})(t.connect.bind(t)),e=t.disconnect,t.disconnect=(i,s,r)=>{if(e.apply(t),void 0===i)n.clear();else if("number"==typeof i)for(let[t,e]of n){let s=e.filter(t=>t.output!==i);0===s.length?n.delete(t):n.set(t,s)}else if(n.has(i))if(void 0===s)n.delete(i);else{let t=n.get(i);if(void 0!==t){let e=t.filter(t=>t.output!==s&&(t.input!==r||void 0===r));0===e.length?n.delete(i):n.set(i,e)}}for(let[e,i]of n)i.forEach(n=>{to(e)?t.connect(e,n.output,n.input):t.connect(e,n.output)})}})(s),f.set(this,s),y.set(this,new Set),"closed"!==e.state&&i&&D(this),t(this,r,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,o=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw s();let u=m(h(this._context));if(p(t)||d(t))throw r();if("context"in t){let s=te(t);try{let e=$(this._nativeAudioNode,s,n,o),i=ts(this);(u||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&ts(t)&&D(t)}catch(t){if(12===t.code)throw r();throw t}return e(this,t,n,o,u)&&ta(l([this],t),i(u)),t}let c=tn(t);if("playbackRate"===c.name&&1024===c.maxValue)throw a();try{this._nativeAudioNode.connect(c,n),(u||ts(this))&&this._nativeAudioNode.disconnect(c,n)}catch(t){if(12===t.code)throw r();throw t}((t,e,n,i)=>{let{activeInputs:s,passiveInputs:r}=W(e),{outputs:a}=L(t),o=E(t),l=a=>{let o=te(t),l=tn(e);if(a){let e=K(r,t,n);Y(s,t,e,!1),i||ti(t)||o.connect(l,n)}else Z(r,M(s,e=>e[0]===t&&e[1]===n),!1),i||ti(t)||o.disconnect(l,n)};return!!X(a,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(o.add(l),j(t)?Y(s,t,[n,l],!0):Z(r,[t,n,l],!0),!0)})(this,t,n,u)&&ta(l([this],t),i(u))}disconnect(t,e,n){let i,a=m(h(this._context));if(void 0===t)i=((t,e)=>{let n=L(t),i=[];for(let s of n.outputs)G(s)?tl(t,e,...s):tu(t,e,...s),i.push(s[0]);return n.outputs.clear(),i})(this,a);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw s();i=((t,e,n)=>{let i=L(t),s=[];for(let r of i.outputs)r[1]===n&&(G(r)?tl(t,e,...r):tu(t,e,...r),s.push(r[0]),i.outputs.delete(r));return s})(this,a,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs)||"context"in t&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw s();if(0===(i=((t,e,n,i,s)=>{let r=L(t);return Array.from(r.outputs).filter(t=>t[0]===n&&(void 0===i||t[1]===i)&&(void 0===s||t[2]===s)).map(n=>(G(n)?tl(t,e,...n):tu(t,e,...n),r.outputs.delete(n),n[0]))})(this,a,t,e,n)).length)throw r()}for(let t of i)ta(l([this],t),o)}})((t,e,n)=>{let i=[];for(let t=0;t<n.numberOfInputs;t+=1)i.push(new Set);d.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},((t,e,n,i,s,r,a,o,l,u,h,c,p)=>{let d=new WeakMap;return(f,m,g,v,y)=>{let{activeInputs:b,passiveInputs:x}=r(m),{outputs:w}=r(f),T=o(f),k=r=>{let o=l(m),u=l(f);if(r){let e=I(x,f,g,v);t(b,f,e,!1),y||c(f)||n(u,o,g,v),p(m)&&D(m)}else{let t=i(b,f,g,v);e(x,v,t,!1),y||c(f)||s(u,o,g,v);let n=a(m);if(0===n)h(m)&&N(m,b);else{let t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout(()=>{h(m)&&N(m,b)},1e3*n))}}};return!!u(w,[m,g,v],t=>t[0]===m&&t[1]===g&&t[2]===v,!0)&&(T.add(k),h(f)?t(b,f,[g,v,k],!0):e(x,v,[f,g,k],!0),!0)}})(et,ee,$,en,tt,L,es,E,te,X,j,ti,ts),er,((t,e,n,i,s,r)=>a=>(o,l)=>{let u=t.get(o);if(void 0===u){if(!a&&r(o)){let t=i(o),{outputs:r}=n(o);for(let n of r)if(G(n))e(t,i(n[0]),n[1],n[2]);else{let e=s(n[0]);t.disconnect(e,n[1])}}t.set(o,l)}else t.set(o,u+l)})(b,tt,L,te,tn,j),q,tS,tX,((t,e,n,i,s,r,a,o)=>(l,u)=>{let h=e.get(l);if(void 0===h)throw Error("Missing the expected cycle count.");let c=o(r(l.context));if(h===u){if(e.delete(l),!c&&a(l)){let e=i(l),{outputs:r}=n(l);for(let n of r)if(G(n))t(e,i(n[0]),n[1],n[2]);else{let t=s(n[0]);e.connect(t,n[1])}}}else e.set(l,h-u)})($,b,L,te,tn,ec,j,ed),function t(e,n){let i="context"in n?n:O(ef,n);if("delayTime"in i)return[];if(e[0]===i)return[e];if(e.includes(i))return[];let{outputs:s}=L(i);return Array.from(s).map(n=>t([...e,i],n[0])).reduce((t,e)=>t.concat(e),[])},em,ec,eg,ev,ey,ed,eb),ew=((t,e,n,i,s,r)=>class extends t{constructor(t,n){let a=s(t),o=i(a,{...V,...n});super(t,!1,o,r(a)?e():null),this._nativeAnalyserNode=o}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){let e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){let e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(ex,eh,q,eo,ec,ed),eT=new WeakSet,ek=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(ea),eC=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),eA=((t,e)=>n=>{n.copyFromChannel=(i,s,r=0)=>{let a=t(r),o=t(s);if(o>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(o),h=i.length;for(let t=a<0?-a:0;t+a<l&&t<h;t+=1)i[t]=u[t+a]},n.copyToChannel=(i,s,r=0)=>{let a=t(r),o=t(s);if(o>=n.numberOfChannels)throw e();let l=n.length,u=n.getChannelData(o),h=i.length;for(let t=a<0?-a:0;t+a<l&&t<h;t+=1)u[t+a]=i[t]}})(eC,q),eS=(t=>e=>{let n,i;n=e.copyFromChannel,e.copyFromChannel=(i,s,r=0)=>{let a=t(r),o=t(s);if(a<e.length)return n.call(e,i,o,a)},i=e.copyToChannel,e.copyToChannel=(n,s,r=0)=>{let a=t(r),o=t(s);if(a<e.length)return i.call(e,n,o,a)}})(eC),eO=((t,e,n,i,s,r,a,o)=>{let l=null;return class u{constructor(u){if(null===s)throw Error("Missing the native OfflineAudioContext constructor.");let{length:h,numberOfChannels:c,sampleRate:p}={...F,...u};null===l&&(l=new s(1,1,44100));let d=null!==i&&e(r,r)?new i({length:h,numberOfChannels:c,sampleRate:p}):l.createBuffer(c,h,p);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(a(d),U(d)):e(P,()=>P(d))||o(d),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(eT,er,tX,ek,ep,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(ek),eA,eS),eM=(t,e)=>{let n=tz(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);let i=()=>{e.removeEventListener("ended",i),e.disconnect(n),n.disconnect()};e.addEventListener("ended",i)},eI=async(t,e,n)=>{let i=W(t);await Promise.all(Array.from(i.activeInputs).map(async([t,i])=>{let s=el(t),r=await s.render(t,e);ti(t)||r.connect(n,i)}))},eE=(t,e,n)=>eI(e,t,n),eD=((t,e,n,i,s,r,a,o,l,u,h)=>(c,p)=>{let d=c.createBufferSource();return tR(d,p),tV(d,p,"playbackRate"),tD(d,p,"buffer"),tD(d,p,"loop"),tD(d,p,"loopEnd"),tD(d,p,"loopStart"),e(n,()=>n(c))||(t=>{t.start=(e=>{let n=!1;return(i=0,s=0,r)=>{if(n)throw tA();e.call(t,i,s,r),n=!0}})(t.start)})(d),e(i,()=>i(c))||l(d),e(s,()=>s(c))||u(d,c),e(r,()=>r(c))||tP(d),e(a,()=>a(c))||h(d,c),e(o,()=>o(c))||tq(d),t(c,d),d})(eM,er,t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{let e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100);try{e.start(0,1)}catch{return!1}return!0},t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},t4,t5,t6,t=>{t.start=(e=>(n=0,i=0,s)=>{let r=t.buffer,a=null===r?i:Math.min(r.duration,i);null!==r&&a>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,s)})(t.start)},(t,e)=>{let n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),t8(t,"buffer",e=>()=>{let i=e.call(t);return i===n?null:i},e=>i=>e.call(t,null===i?n:i))},t7),eR=(i=t=>{let e=W(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},(t,e,n)=>(i(e).replay(n),eI(e,t,n))),eN=()=>{let t=new WeakMap,e=null,n=null,i=async(i,s)=>{let r=te(i),a=r.context===s;return a||(r=eD(s,{buffer:r.buffer,channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,loop:r.loop,loopEnd:r.loopEnd,loopStart:r.loopStart,playbackRate:r.playbackRate.value}),null!==e&&r.start(...e),null!==n&&r.stop(n)),t.set(s,r),a?await eE(s,i.playbackRate,r.playbackRate):await eR(s,i.playbackRate,r.playbackRate),await eu(i,s,r),r};return{set start(value){e=value},set stop(value){n=value},render(e,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):i(e,n)}}},eV=((t,e,n,i,s,r,a,o,l,u,h,p,d)=>(f,m,g,v=null,y=null)=>{let b=g.value,x=new c.AutomationEventList(b),w=m?i(x):null,T={get defaultValue(){return b},get maxValue(){return null===v?g.maxValue:v},get minValue(){return null===y?g.minValue:y},get value(){return g.value},set value(value){g.value=value,T.setValueAtTime(value,f.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof g.cancelAndHoldAtTime)null===w&&x.flush(f.context.currentTime),x.add(s(t)),g.cancelAndHoldAtTime(t);else{let e=Array.from(x).pop();null===w&&x.flush(f.context.currentTime),x.add(s(t));let n=Array.from(x).pop();g.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?g.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?g.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?g.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&g.setValueCurveAtTime(n.values,n.startTime,n.duration))}return T},cancelScheduledValues:t=>(null===w&&x.flush(f.context.currentTime),x.add(r(t)),g.cancelScheduledValues(t),T),exponentialRampToValueAtTime(t,e){if(0===t||!Number.isFinite(e)||e<0)throw RangeError();let n=f.context.currentTime;return null===w&&x.flush(n),0===Array.from(x).length&&(x.add(u(b,n)),g.setValueAtTime(b,n)),x.add(a(t,e)),g.exponentialRampToValueAtTime(t,e),T},linearRampToValueAtTime(t,e){let n=f.context.currentTime;return null===w&&x.flush(n),0===Array.from(x).length&&(x.add(u(b,n)),g.setValueAtTime(b,n)),x.add(o(t,e)),g.linearRampToValueAtTime(t,e),T},setTargetAtTime:(t,e,n)=>(null===w&&x.flush(f.context.currentTime),x.add(l(t,e,n)),g.setTargetAtTime(t,e,n),T),setValueAtTime:(t,e)=>(null===w&&x.flush(f.context.currentTime),x.add(u(t,e)),g.setValueAtTime(t,e),T),setValueCurveAtTime(t,e,n){let i=t instanceof Float32Array?t:new Float32Array(t);if(null!==p&&"webkitAudioContext"===p.name){let t=e+n,s=f.context.sampleRate,r=Math.ceil(e*s),a=Math.floor(t*s),o=a-r,l=new Float32Array(o);for(let t=0;t<o;t+=1){let a=(i.length-1)/n*((r+t)/s-e),o=Math.floor(a),u=Math.ceil(a);l[t]=o===u?i[o]:(1-(a-o))*i[o]+(1-(u-a))*i[u]}null===w&&x.flush(f.context.currentTime),x.add(h(l,e,n)),g.setValueCurveAtTime(l,e,n);let u=a/s;u<t&&d(T,l[l.length-1],u),d(T,i[i.length-1],t)}else null===w&&x.flush(f.context.currentTime),x.add(h(i,e,n)),g.setValueCurveAtTime(i,e,n);return T}};return n.set(T,g),e.set(T,f),t(T,w),T})((t,e)=>{m.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},ef,g,t=>({replay(e){for(let n of t)if("exponentialRampToValue"===n.type){let{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){let{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){let{startTime:t,target:i,timeConstant:s}=n;e.setTargetAtTime(i,t,s)}else if("setValue"===n.type){let{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else if("setValueCurve"===n.type){let{duration:t,startTime:i,values:s}=n;e.setValueCurveAtTime(s,i,t)}else throw Error("Can't apply an unknown automation.")}}),c.createCancelAndHoldAutomationEvent,c.createCancelScheduledValuesAutomationEvent,c.createExponentialRampToValueAutomationEvent,c.createLinearRampToValueAutomationEvent,c.createSetTargetAutomationEvent,c.createSetValueAutomationEvent,c.createSetValueCurveAutomationEvent,e_,t3),eP=((t,e,n,i,s,r,a,o)=>class extends t{constructor(t,i){let o=r(t),l={...B,...i},u=s(o,l),h=a(o),c=h?e():null;super(t,!1,u,c),this._audioBufferSourceNodeRenderer=c,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,h,u.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeAudioBufferSourceNode.onended=e;let n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){D(this);let t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),j(this)&&R(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(ex,eN,eV,tA,eD,ec,ed,t9),eq=((t,e,n,i,s,r,a,o)=>class extends t{constructor(t,n){let i=r(t),l=a(i),u=s(i,n,l);super(t,!1,u,l?e(o):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=u}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(ex,t=>{let e=new WeakMap,n=async(n,i)=>{let s=i.destination;return e.set(i,s),await t(n,i,s),s};return{render(t,i){let s=e.get(i);return void 0!==s?Promise.resolve(s):n(t,i)}}},q,tA,((t,e)=>(n,i,s)=>{let r=n.destination;if(r.channelCount!==i)try{r.channelCount=i}catch{}s&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:i});let a=t(n,{channelCount:i,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(a,"channelCount",t=>()=>t.call(a),t=>e=>{t.call(a,e);try{r.channelCount=e}catch(t){if(e>r.maxChannelCount)throw t}}),e(a,"channelCountMode",t=>()=>t.call(a),t=>e=>{t.call(a,e),r.channelCountMode=e}),e(a,"channelInterpretation",t=>()=>t.call(a),t=>e=>{t.call(a,e),r.channelInterpretation=e}),Object.defineProperty(a,"maxChannelCount",{get:()=>r.maxChannelCount}),a.connect(r),a})(tz,t8),ec,ed,eu),eU=((t,e,n,i,s)=>()=>{let r=new WeakMap,a=async(a,o)=>{let l=n(a),u=l.context===o;return u||(l=e(o,{Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type})),r.set(o,l),u?(await t(o,a.Q,l.Q),await t(o,a.detune,l.detune),await t(o,a.frequency,l.frequency),await t(o,a.gain,l.gain)):(await i(o,a.Q,l.Q),await i(o,a.detune,l.detune),await i(o,a.frequency,l.frequency),await i(o,a.gain,l.gain)),await s(a,o,l),l};return{render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}})(eE,tj,te,eR,eu),eF=(t,e)=>ei.set(t,e),ej=((t,e,n,i,s,r,a,o)=>class extends t{constructor(t,i){let l=r(t),u=s(l,{...t_,...i}),h=a(l);super(t,!1,u,h?n():null),this._Q=e(this,h,u.Q,34028234663852886e22,-34028234663852886e22),this._detune=e(this,h,u.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=e(this,h,u.frequency,t.sampleRate/2,0),this._gain=e(this,h,u.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=u,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw i();throw t}if(t.length!==e.length||e.length!==n.length)throw i()}})(ex,eV,eU,tS,tj,ec,ed,eF),eB=((t,e)=>(n,i,s)=>{let r=new Set;return n.connect=(s=>(a,o=0,l=0)=>{let u=0===r.size;if(e(a))return s.call(n,a,o,l),t(r,[a,o,l],t=>t[0]===a&&t[1]===o&&t[2]===l,!0),u&&i(),a;s.call(n,a,o),t(r,[a,o],t=>t[0]===a&&t[1]===o,!0),u&&i()})(n.connect),n.disconnect=(t=>(i,a,o)=>{let l=r.size>0;if(void 0===i)t.apply(n),r.clear();else if("number"==typeof i)for(let e of(t.call(n,i),r))e[1]===i&&r.delete(e);else for(let s of(e(i)?t.call(n,i,a,o):t.call(n,i,a),r))s[0]===i&&(void 0===a||s[1]===a)&&(void 0===o||s[2]===o)&&r.delete(s);let u=0===r.size;l&&u&&s()})(n.disconnect),n})(X,ev),eL=((t,e)=>(n,i)=>{let s=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,s),tR(s,i),s})(e_,((t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let s=n.createBufferSource();e(i,()=>{let t=i.numberOfInputs;for(let e=0;e<t;e+=1)s.connect(i,0,e)},()=>s.disconnect(i))})(tA,eB)),eW=((t,e,n,i,s)=>class extends t{constructor(t,r){let a=i(t);super(t,!1,n(a,{...tg,...r}),s(a)?e():null)}})(ex,()=>{let t=new WeakMap,e=async(e,n)=>{let i=te(e);return i.context!==n&&(i=eL(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs})),t.set(n,i),await eu(e,n,i),i};return{render(n,i){let s=t.get(i);return void 0!==s?Promise.resolve(s):e(n,i)}}},eL,ec,ed),ez=((t,e,n,i,s,r)=>class extends t{constructor(t,a){let o=i(t);super(t,!1,n(o,r({...tv,...a})),s(o)?e():null)}})(ex,()=>{let t=new WeakMap,e=async(e,n)=>{let i=te(e);return i.context!==n&&(i=tB(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs})),t.set(n,i),await eu(e,n,i),i};return{render(n,i){let s=t.get(i);return void 0!==s?Promise.resolve(s):e(n,i)}}},tB,ec,ed,t=>({...t,channelCount:t.numberOfOutputs})),eH=(t,{offset:e,...n})=>{let i=t.createBuffer(1,2,44100),s=eD(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=tz(t,{...n,gain:e}),a=i.getChannelData(0);return a[0]=1,a[1]=1,s.buffer=i,s.loop=!0,eM(t,s),eB(tL({get bufferSize(){return},get channelCount(){return r.channelCount},set channelCount(value){r.channelCount=value},get channelCountMode(){return r.channelCountMode},set channelCountMode(value){r.channelCountMode=value},get channelInterpretation(){return r.channelInterpretation},set channelInterpretation(value){r.channelInterpretation=value},get context(){return r.context},get inputs(){return[]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return r.numberOfOutputs},get offset(){return r.gain},get onended(){return s.onended},set onended(value){s.onended=value},addEventListener:(...t)=>s.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>s.dispatchEvent(t[0]),removeEventListener:(...t)=>s.removeEventListener(t[0],t[1],t[2]),start(t=0){s.start.call(s,t)},stop(t=0){s.stop.call(s,t)}},r),()=>s.connect(r),()=>s.disconnect(r))},eG=((t,e,n,i,s)=>(r,a)=>{if(void 0===r.createConstantSource)return n(r,a);let o=r.createConstantSource();return tR(o,a),tV(o,a,"offset"),e(i,()=>i(r))||tP(o),e(s,()=>s(r))||tq(o),t(r,o),o})(eM,er,eH,t4,t6),eX=((t,e,n,i,s,r,a)=>class extends t{constructor(t,a){let o=s(t),l=i(o,{...ty,...a}),u=r(o),h=u?n():null;super(t,!1,l,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=l,this._offset=e(this,u,l.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){let e="function"==typeof t?a(this,t):null;this._nativeConstantSourceNode.onended=e;let n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){D(this);let t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),j(this)&&R(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(ex,eV,()=>{let t=new WeakMap,e=null,n=null,i=async(i,s)=>{let r=te(i),a=r.context===s;return a||(r=eG(s,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,offset:r.offset.value}),null!==e&&r.start(e),null!==n&&r.stop(n)),t.set(s,r),a?await eE(s,i.offset,r.offset):await eR(s,i.offset,r.offset),await eu(i,s,r),r};return{set start(value){e=value},set stop(value){n=value},render(e,n){let s=t.get(n);return void 0!==s?Promise.resolve(s):i(e,n)}}},eG,ec,ed,t9),eY=((t,e)=>(n,i)=>{let s=n.createConvolver();if(tR(s,i),i.disableNormalization===s.normalize&&(s.normalize=!i.disableNormalization),tD(s,i,"buffer"),i.channelCount>2||(e(s,"channelCount",t=>()=>t.call(s),e=>n=>{if(n>2)throw t();return e.call(s,n)}),"max"===i.channelCountMode))throw t();return e(s,"channelCountMode",t=>()=>t.call(s),e=>n=>{if("max"===n)throw t();return e.call(s,n)}),s})(tX,t8),eZ=((t,e,n,i,s,r)=>class extends t{constructor(t,a){let o=i(t),l={...tb,...a},u=n(o,l);super(t,!1,u,s(o)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){let t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(ex,((t,e,n)=>()=>{let i=new WeakMap,s=async(s,r)=>{let a=e(s);return a.context!==r&&(a=t(r,{buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize})),i.set(r,a),"inputs"in a?await n(s,r,a.inputs[0]):await n(s,r,a),a};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}})(eY,te,eu),eY,ec,ed,eF),e$=((t,e,n,i,s,r,a)=>class extends t{constructor(t,o){let l=s(t),u={...tw,...o},h=i(l,u),c=r(l);super(t,!1,h,c?n(u.maxDelayTime):null),this._delayTime=e(this,c,h.delayTime),a(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(ex,eV,t=>{let e=new WeakMap,n=async(n,i)=>{let s=te(n),r=s.context===i;return r||(s=tW(i,{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,delayTime:s.delayTime.value,maxDelayTime:t})),e.set(i,s),r?await eE(i,n.delayTime,s.delayTime):await eR(i,n.delayTime,s.delayTime),await eu(n,i,s),s};return{render(t,i){let s=e.get(i);return void 0!==s?Promise.resolve(s):n(t,i)}}},tW,ec,ed,eF),eQ=(a=tX,(t,e)=>{let n=t.createDynamicsCompressor();if(tR(n,e),e.channelCount>2||"max"===e.channelCountMode)throw a();return tV(n,e,"attack"),tV(n,e,"knee"),tV(n,e,"ratio"),tV(n,e,"release"),tV(n,e,"threshold"),n}),eJ=((t,e,n,i,s,r,a,o)=>class extends t{constructor(t,s){let l=r(t),u=i(l,{...tk,...s}),h=a(l);super(t,!1,u,h?n():null),this._attack=e(this,h,u.attack),this._knee=e(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,h,u.ratio),this._release=e(this,h,u.release),this._threshold=e(this,h,u.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){let e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){let e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(ex,eV,((t,e,n,i,s)=>()=>{let r=new WeakMap,a=async(a,o)=>{let l=n(a),u=l.context===o;return u||(l=e(o,{attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value})),r.set(o,l),u?(await t(o,a.attack,l.attack),await t(o,a.knee,l.knee),await t(o,a.ratio,l.ratio),await t(o,a.release,l.release),await t(o,a.threshold,l.threshold)):(await i(o,a.attack,l.attack),await i(o,a.knee,l.knee),await i(o,a.ratio,l.ratio),await i(o,a.release,l.release),await i(o,a.threshold,l.threshold)),await s(a,o,l),l};return{render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}})(eE,eQ,te,eR,eu),eQ,tX,ec,ed,eF),eK=((t,e,n,i,s,r)=>class extends t{constructor(t,a){let o=s(t),l=i(o,{...tC,...a}),u=r(o);super(t,!1,l,u?n():null),this._gain=e(this,u,l.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}})(ex,eV,()=>{let t=new WeakMap,e=async(e,n)=>{let i=te(e),s=i.context===n;return s||(i=tz(n,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:i.gain.value})),t.set(n,i),s?await eE(n,e.gain,i.gain):await eR(n,e.gain,i.gain),await eu(e,n,i),i};return{render(n,i){let s=t.get(i);return void 0!==s?Promise.resolve(s):e(n,i)}}},tz,ec,ed),e0=((t,e,n,i)=>(s,r,{channelCount:a,channelCountMode:o,channelInterpretation:l,feedback:u,feedforward:h})=>{let c=tU(r,s.sampleRate),p=u instanceof Float64Array?u:new Float64Array(u),d=h instanceof Float64Array?h:new Float64Array(h),f=p.length,m=d.length,g=Math.min(f,m);if(0===f||f>20)throw i();if(0===p[0])throw e();if(0===m||m>20)throw i();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}let v=n(s,c,a,a);v.channelCount=a,v.channelCountMode=o,v.channelInterpretation=l;let y=[],b=[],x=[];for(let t=0;t<a;t+=1){y.push(0);let t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),b.push(t),x.push(e)}v.onaudioprocess=t=>{let e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let t=0;t<i;t+=1){let i=e.getChannelData(t),s=n.getChannelData(t);y[t]=tM(p,f,d,m,g,b[t],x[t],y[t],32,i,s)}};let w=s.sampleRate/2;return tL({get bufferSize(){return c},get channelCount(){return v.channelCount},set channelCount(value){v.channelCount=value},get channelCountMode(){return v.channelCountMode},set channelCountMode(value){v.channelCountMode=value},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(value){v.channelInterpretation=value},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener:(...t)=>v.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>v.dispatchEvent(t[0]),getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();let s=e.length;for(let t=0;t<s;t+=1){let s=-Math.PI*(e[t]/w),r=[Math.cos(s),Math.sin(s)],a=function(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(tH(d,r),tH(p,r));n[t]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),i[t]=Math.atan2(a[1],a[0])}},removeEventListener:(...t)=>v.removeEventListener(t[0],t[1],t[2])},v)})(tS,tA,tG,tX),e1=((t,e,n,i)=>s=>t(tE,()=>tE(s))?Promise.resolve(t(i,i)).then(t=>{if(!t){let t=n(s,512,0,1);s.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>s.currentTime,t.connect(s.destination)}return s.startRendering()}):new Promise(t=>{let n=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(s.destination),s.startRendering()}))(er,tz,tG,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);let n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(tz,ep)),e2=((t,e,n,i,s,r)=>class extends t{constructor(t,a){let o=i(t),l=s(o),u={...tO,...a},h=e(o,l?null:t.baseLatency,u);super(t,!1,h,l?n(u.feedback,u.feedforward):null),(t=>{let e;e=t.getFrequencyResponse,t.getFrequencyResponse=(n,i,s)=>{if(n.length!==i.length||i.length!==s.length)throw tS();return e.call(t,n,i,s)}})(h),this._nativeIIRFilterNode=h,r(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(ex,(t,e,n)=>{if(void 0===t.createIIRFilter)return e0(t,e,n);let i=t.createIIRFilter(n.feedforward,n.feedback);return tR(i,n),i},((t,e,n,i,s)=>(r,a)=>{let o=new WeakMap,l=null,u=async(u,h)=>{let c=null,p=e(u),d=p.context===h;if(void 0===h.createIIRFilter?c=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=h.createIIRFilter(a,r)),o.set(h,null===c?p:c),null!==c){if(null===l){if(null===n)throw Error("Missing the native OfflineAudioContext constructor.");let t=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(async()=>(await i(u,t,t.destination),((t,e,n,i)=>{let s=n instanceof Float64Array?n:new Float64Array(n),r=i instanceof Float64Array?i:new Float64Array(i),a=s.length,o=r.length,l=Math.min(a,o);if(1!==s[0]){for(let t=0;t<a;t+=1)r[t]/=s[0];for(let t=1;t<o;t+=1)s[t]/=s[0]}let u=new Float32Array(32),h=new Float32Array(32),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let e=0;e<p;e+=1){let n=t.getChannelData(e),i=c.getChannelData(e);u.fill(0),h.fill(0),tM(s,a,r,o,l,u,h,0,32,n,i)}return c})(await s(t),h,r,a)))()}let t=await l;return c.buffer=t,c.start(0),c}return await i(u,h,p),p};return{render(t,e){let n=o.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(eD,te,ep,eu,e1),ec,ed,eF),e8=((t,e,n,i,s,r,a,o)=>(l,u)=>{let h=u.listener,{forwardX:c,forwardY:p,forwardZ:d,positionX:f,positionY:m,positionZ:g,upX:v,upY:y,upZ:b}=void 0===h.forwardX?(()=>{let c=new Float32Array(1),p=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),d=a(u),f=!1,m=[0,0,-1,0,1,0],g=[0,0,0],v=()=>{if(f)return;f=!0;let t=i(u,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{let e=[r(t,c,0),r(t,c,1),r(t,c,2),r(t,c,3),r(t,c,4),r(t,c,5)];e.some((t,e)=>t!==m[e])&&(h.setOrientation(...e),m=e);let n=[r(t,c,6),r(t,c,7),r(t,c,8)];n.some((t,e)=>t!==g[e])&&(h.setPosition(...n),g=n)},p.connect(t)},y=t=>e=>{e!==m[t]&&(m[t]=e,h.setOrientation(...m))},b=t=>e=>{e!==g[t]&&(g[t]=e,h.setPosition(...g))},x=(e,i,r)=>{var a,h,c,f,m,g,y;let b=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});b.connect(p,0,e),b.start(),Object.defineProperty(b.offset,"defaultValue",{get:()=>i});let x=t({context:l},d,b.offset,34028234663852886e22,-34028234663852886e22);return o(x,"value",t=>()=>t.call(x),t=>e=>{try{t.call(x,e)}catch(t){if(9!==t.code)throw t}v(),d&&r(e)}),a=x.cancelAndHoldAtTime,x.cancelAndHoldAtTime=d?()=>{throw s()}:(...t)=>{let e=a.apply(x,t);return v(),e},h=x.cancelScheduledValues,x.cancelScheduledValues=d?()=>{throw s()}:(...t)=>{let e=h.apply(x,t);return v(),e},c=x.exponentialRampToValueAtTime,x.exponentialRampToValueAtTime=d?()=>{throw s()}:(...t)=>{let e=c.apply(x,t);return v(),e},f=x.linearRampToValueAtTime,x.linearRampToValueAtTime=d?()=>{throw s()}:(...t)=>{let e=f.apply(x,t);return v(),e},m=x.setTargetAtTime,x.setTargetAtTime=d?()=>{throw s()}:(...t)=>{let e=m.apply(x,t);return v(),e},g=x.setValueAtTime,x.setValueAtTime=d?()=>{throw s()}:(...t)=>{let e=g.apply(x,t);return v(),e},y=x.setValueCurveAtTime,x.setValueCurveAtTime=d?()=>{throw s()}:(...t)=>{let e=y.apply(x,t);return v(),e},x};return{forwardX:x(0,0,y(0)),forwardY:x(1,0,y(1)),forwardZ:x(2,-1,y(2)),positionX:x(6,0,b(0)),positionY:x(7,0,b(1)),positionZ:x(8,0,b(2)),upX:x(3,0,y(3)),upY:x(4,1,y(4)),upZ:x(5,0,y(5))}})():h;return{get forwardX(){return c},get forwardY(){return p},get forwardZ(){return d},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return y},get upZ(){return b}}})(eV,eL,eG,tG,tX,t1,ed,t8),e3=new WeakMap,e4=((t,e,n,i,s,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,v.set(this,n),i(n)&&s.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){let e="function"==typeof t?r(this,t):null;this._nativeContext.onstatechange=e;let n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(eq,e8,em,ed,e3,t9),e5=((t,e,n,i,s,r)=>(a,o)=>{let l=a.createOscillator();return tR(l,o),tV(l,o,"detune"),tV(l,o,"frequency"),void 0!==o.periodicWave?l.setPeriodicWave(o.periodicWave):tD(l,o,"type"),e(n,()=>n(a))||tP(l),e(i,()=>i(a))||r(l,a),e(s,()=>s(a))||tq(l),t(a,l),l})(eM,er,t4,t5,t6,t7),e6=((t,e,n,i,s)=>()=>{let r=new WeakMap,a=null,o=null,l=null,u=async(u,h)=>{let c=n(u),p=c.context===h;return p||(c=e(h,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,periodicWave:null===a?void 0:a,type:c.type}),null!==o&&c.start(o),null!==l&&c.stop(l)),r.set(h,c),p?(await t(h,u.detune,c.detune),await t(h,u.frequency,c.frequency)):(await i(h,u.detune,c.detune),await i(h,u.frequency,c.frequency)),await s(u,h,c),c};return{set periodicWave(value){a=value},set start(value){o=value},set stop(value){l=value},render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}})(eE,e5,te,eR,eu),e7=((t,e,n,i,s,r,a)=>class extends t{constructor(t,a){let o=s(t),l={...tZ,...a},u=n(o,l),h=r(o),c=h?i():null,p=t.sampleRate/2;super(t,!1,u,c),this._detune=e(this,h,u.detune,153600,-153600),this._frequency=e(this,h,u.frequency,p,-p),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=c,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){let e="function"==typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;let n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){D(this);let t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),j(this)&&R(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(ex,eV,e5,e6,ec,ed,t9),e9=(t,e)=>{let n=eD(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1});return n.buffer=t.createBuffer(1,2,44100),n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}},nt=((t,e,n,i,s)=>(r,{curve:a,oversample:o,...l})=>{let u=r.createWaveShaper(),h=r.createWaveShaper();tR(u,l),tR(h,l);let c=n(r,{...l,gain:1}),p=n(r,{...l,gain:-1}),d=n(r,{...l,gain:1}),f=n(r,{...l,gain:-1}),m=null,g=!1,v=null,y={get bufferSize(){return},get channelCount(){return u.channelCount},set channelCount(value){c.channelCount=value,p.channelCount=value,u.channelCount=value,d.channelCount=value,h.channelCount=value,f.channelCount=value},get channelCountMode(){return u.channelCountMode},set channelCountMode(value){c.channelCountMode=value,p.channelCountMode=value,u.channelCountMode=value,d.channelCountMode=value,h.channelCountMode=value,f.channelCountMode=value},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(value){c.channelInterpretation=value,p.channelInterpretation=value,u.channelInterpretation=value,d.channelInterpretation=value,h.channelInterpretation=value,f.channelInterpretation=value},get context(){return u.context},get curve(){return v},set curve(value){if(null!==value&&value.length<2)throw e();if(null===value)u.curve=value,h.curve=value;else{let t=value.length,e=new Float32Array(t+2-t%2),n=new Float32Array(t+2-t%2);e[0]=value[0],n[0]=-value[t-1];let i=Math.ceil((t+1)/2),s=(t+1)/2-1;for(let r=1;r<i;r+=1){let a=r/i*s,o=Math.floor(a),l=Math.ceil(a);e[r]=o===l?value[o]:(1-(a-o))*value[o]+(1-(l-a))*value[l],n[r]=o===l?-value[t-1-o]:-((1-(a-o))*value[t-1-o])-(1-(l-a))*value[t-1-l]}e[i]=t%2==1?value[i-1]:(value[i-2]+value[i-1])/2,u.curve=e,h.curve=n}v=value,g&&(i(v)&&null===m?m=t(r,c):null!==m&&(m(),m=null))},get inputs(){return[c]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(value){u.oversample=value,h.oversample=value},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};return null!==a&&(y.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==y.oversample&&(y.oversample=o),s(tL(y,d),()=>{c.connect(u).connect(d),c.connect(p).connect(h).connect(f).connect(d),g=!0,i(v)&&(m=t(r,c))},()=>{c.disconnect(u),u.disconnect(d),c.disconnect(p),p.disconnect(h),h.disconnect(f),f.disconnect(d),g=!1,null!==m&&(m(),m=null)})})(e9,tA,tz,t2,eB),ne=((t,e,n,i,s,r,a)=>(o,l)=>{let u=o.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===o.createGain().gain.automationRate)return n(o,l);tR(u,l);let h=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==h&&h.length<2)throw e();tD(u,{curve:h},"curve"),tD(u,l,"oversample");let c=null,p=!1;return a(u,"curve",t=>()=>t.call(u),e=>n=>(e.call(u,n),p&&(i(n)&&null===c?c=t(o,u):i(n)||null===c||(c(),c=null)),n)),s(u,()=>{p=!0,i(u.curve)&&(c=t(o,u))},()=>{p=!1,null!==c&&(c(),c=null)})})(e9,tA,nt,t2,eB,e_,t8),nn=(s=((t,e,n,i,s,r,a,o,l,u)=>(h,{coneInnerAngle:c,coneOuterAngle:p,coneOuterGain:d,distanceModel:f,maxDistance:m,orientationX:g,orientationY:v,orientationZ:y,panningModel:b,positionX:x,positionY:w,positionZ:T,refDistance:k,rolloffFactor:C,...A})=>{let S=h.createPanner();if(A.channelCount>2||"max"===A.channelCountMode)throw a();tR(S,A);let O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=n(h,{...O,channelInterpretation:"speakers",numberOfInputs:6}),I=i(h,{...A,gain:1}),E=i(h,{...O,gain:1}),D=i(h,{...O,gain:0}),R=i(h,{...O,gain:0}),N=i(h,{...O,gain:0}),V=i(h,{...O,gain:0}),P=i(h,{...O,gain:0}),q=s(h,256,6,1),U=r(h,{...O,curve:new Float32Array([1,1]),oversample:"none"}),F=[g,v,y],j=[x,w,T],B=new Float32Array(1);q.onaudioprocess=({inputBuffer:t})=>{let e=[l(t,B,0),l(t,B,1),l(t,B,2)];e.some((t,e)=>t!==F[e])&&(S.setOrientation(...e),F=e);let n=[l(t,B,3),l(t,B,4),l(t,B,5)];n.some((t,e)=>t!==j[e])&&(S.setPosition(...n),j=n)},Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});let L={get bufferSize(){return},get channelCount(){return S.channelCount},set channelCount(value){if(value>2)throw a();I.channelCount=value,S.channelCount=value},get channelCountMode(){return S.channelCountMode},set channelCountMode(value){if("max"===value)throw a();I.channelCountMode=value,S.channelCountMode=value},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(value){I.channelInterpretation=value,S.channelInterpretation=value},get coneInnerAngle(){return S.coneInnerAngle},set coneInnerAngle(value){S.coneInnerAngle=value},get coneOuterAngle(){return S.coneOuterAngle},set coneOuterAngle(value){S.coneOuterAngle=value},get coneOuterGain(){return S.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw e();S.coneOuterGain=value},get context(){return S.context},get distanceModel(){return S.distanceModel},set distanceModel(value){S.distanceModel=value},get inputs(){return[I]},get maxDistance(){return S.maxDistance},set maxDistance(value){if(value<0)throw RangeError();S.maxDistance=value},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get orientationX(){return E.gain},get orientationY(){return D.gain},get orientationZ(){return R.gain},get panningModel(){return S.panningModel},set panningModel(value){S.panningModel=value},get positionX(){return N.gain},get positionY(){return V.gain},get positionZ(){return P.gain},get refDistance(){return S.refDistance},set refDistance(value){if(value<0)throw RangeError();S.refDistance=value},get rolloffFactor(){return S.rolloffFactor},set rolloffFactor(value){if(value<0)throw RangeError();S.rolloffFactor=value},addEventListener:(...t)=>I.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>I.dispatchEvent(t[0]),removeEventListener:(...t)=>I.removeEventListener(t[0],t[1],t[2])};return c!==L.coneInnerAngle&&(L.coneInnerAngle=c),p!==L.coneOuterAngle&&(L.coneOuterAngle=p),d!==L.coneOuterGain&&(L.coneOuterGain=d),f!==L.distanceModel&&(L.distanceModel=f),m!==L.maxDistance&&(L.maxDistance=m),g!==L.orientationX.value&&(L.orientationX.value=g),v!==L.orientationY.value&&(L.orientationY.value=v),y!==L.orientationZ.value&&(L.orientationZ.value=y),b!==L.panningModel&&(L.panningModel=b),x!==L.positionX.value&&(L.positionX.value=x),w!==L.positionY.value&&(L.positionY.value=w),T!==L.positionZ.value&&(L.positionZ.value=T),k!==L.refDistance&&(L.refDistance=k),C!==L.rolloffFactor&&(L.rolloffFactor=C),(1!==F[0]||0!==F[1]||0!==F[2])&&S.setOrientation(...F),(0!==j[0]||0!==j[1]||0!==j[2])&&S.setPosition(...j),u(tL(L,S),()=>{I.connect(S),t(I,U,0,0),U.connect(E).connect(M,0,0),U.connect(D).connect(M,0,1),U.connect(R).connect(M,0,2),U.connect(N).connect(M,0,3),U.connect(V).connect(M,0,4),U.connect(P).connect(M,0,5),M.connect(q).connect(h.destination)},()=>{I.disconnect(S),o(I,U,0,0),U.disconnect(E),E.disconnect(M),U.disconnect(D),D.disconnect(M),U.disconnect(R),R.disconnect(M),U.disconnect(N),N.disconnect(M),U.disconnect(V),V.disconnect(M),U.disconnect(P),P.disconnect(M),M.disconnect(q),q.disconnect(h.destination)})})($,tA,eL,tz,tG,ne,tX,tt,t1,eB),(t,e)=>{let n=t.createPanner();return void 0===n.orientationX?s(t,e):(tR(n,e),tV(n,e,"orientationX"),tV(n,e,"orientationY"),tV(n,e,"orientationZ"),tV(n,e,"positionX"),tV(n,e,"positionY"),tV(n,e,"positionZ"),tD(n,e,"coneInnerAngle"),tD(n,e,"coneOuterAngle"),tD(n,e,"coneOuterGain"),tD(n,e,"distanceModel"),tD(n,e,"maxDistance"),tD(n,e,"panningModel"),tD(n,e,"refDistance"),tD(n,e,"rolloffFactor"),n)}),ni=((t,e,n,i,s,r,a,o,l,u)=>()=>{let h=new WeakMap,c=null,p=async(p,d)=>{let f=null,m=r(p),g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=m.context===d;if("bufferSize"in m?f=i(d,{...g,gain:1}):y||(m=s(d,{...v,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value})),h.set(d,null===f?m:f),null!==f){if(null===c){if(null===a)throw Error("Missing the native OfflineAudioContext constructor.");let t=new a(6,p.context.length,d.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),c=(async()=>{let e=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(e,i)=>{let s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:+(0===i)});return await o(t,e,s.offset),s}));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return u(t)})()}let t=await c,r=i(d,{...g,gain:1});await l(p,d,r);let h=[];for(let e=0;e<t.numberOfChannels;e+=1)h.push(t.getChannelData(e));let m=[h[0][0],h[1][0],h[2][0]],y=[h[3][0],h[4][0],h[5][0]],b=i(d,{...g,gain:1}),x=s(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});r.connect(b).connect(x.inputs[0]),x.connect(f);for(let e=128;e<t.length;e+=128){let t=[h[0][e],h[1][e],h[2][e]],n=[h[3][e],h[4][e],h[5][e]];if(t.some((t,e)=>t!==m[e])||n.some((t,e)=>t!==y[e])){m=t,y=n;let a=e/d.sampleRate;b.gain.setValueAtTime(0,a),b=i(d,{...g,gain:0}),x=s(d,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),b.gain.setValueAtTime(1,a),r.connect(b).connect(x.inputs[0]),x.connect(f)}}return f}return y?(await t(d,p.orientationX,m.orientationX),await t(d,p.orientationY,m.orientationY),await t(d,p.orientationZ,m.orientationZ),await t(d,p.positionX,m.positionX),await t(d,p.positionY,m.positionY),await t(d,p.positionZ,m.positionZ)):(await o(d,p.orientationX,m.orientationX),await o(d,p.orientationY,m.orientationY),await o(d,p.orientationZ,m.orientationZ),await o(d,p.positionX,m.positionX),await o(d,p.positionY,m.positionY),await o(d,p.positionZ,m.positionZ)),"inputs"in m?await l(p,d,m.inputs[0]):await l(p,d,m),m};return{render(t,e){let n=h.get(e);return void 0!==n?Promise.resolve(n):p(t,e)}}})(eE,eL,eG,tz,nn,te,ep,eR,eu,e1),ns=((t,e,n,i,s,r,a)=>class extends t{constructor(t,o){let l=s(t),u=n(l,{...t$,...o}),h=r(l);super(t,!1,u,h?i():null),this._nativePannerNode=u,this._orientationX=e(this,h,u.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=e(this,h,u.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=e(this,h,u.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=e(this,h,u.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=e(this,h,u.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=e(this,h,u.positionZ,34028234663852886e22,-34028234663852886e22),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(ex,eV,nn,ni,ec,ed,eF),nr=((t,e,n,i)=>class s{constructor(s,r){let a=t(e(s),i({...tQ,...r}));return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||n.has(t)}})((t,{disableNormalization:e,imag:n,real:i})=>{let s=n instanceof Float32Array?n:new Float32Array(n),r=i instanceof Float32Array?i:new Float32Array(i),a=t.createPeriodicWave(r,s,{disableNormalization:e});if(Array.from(n).length<2)throw q();return a},ec,new WeakSet,t=>{let{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}}),na=((t,e)=>(n,i)=>{let s=i.channelCountMode;if("clamped-max"===s)throw e();if(void 0===n.createStereoPanner)return t(n,i);let r=n.createStereoPanner();return tR(r,i),tV(r,i,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>s,set:t=>{if(t!==s)throw e()}}),r})(((t,e,n,i,s,r)=>{let a=new Float32Array([1,1]),o=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(t,r,h,c,p)=>{if(1===r)return((t,e,s,r)=>{let h=new Float32Array(16385),c=new Float32Array(16385);for(let t=0;t<16385;t+=1){let e=t/16384*o;h[t]=Math.cos(e),c[t]=Math.sin(e)}let p=n(t,{...l,gain:0}),d=i(t,{...u,curve:h}),f=i(t,{...u,curve:a}),m=n(t,{...l,gain:0}),g=i(t,{...u,curve:c});return{connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(m),f.connect(s),s.connect(void 0===d.inputs?d:d.inputs[0]),s.connect(void 0===g.inputs?g:g.inputs[0]),d.connect(p.gain),g.connect(m.gain),p.connect(r,0,0),m.connect(r,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(m),f.disconnect(s),s.disconnect(void 0===d.inputs?d:d.inputs[0]),s.disconnect(void 0===g.inputs?g:g.inputs[0]),d.disconnect(p.gain),g.disconnect(m.gain),p.disconnect(r,0,0),m.disconnect(r,0,1)}}})(t,h,c,p);if(2===r)return((t,s,r,h)=>{let c=new Float32Array(16385),p=new Float32Array(16385),d=new Float32Array(16385),f=new Float32Array(16385),m=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>m){let e=(t-m)/(16384-m)*o;c[t]=Math.cos(e),p[t]=Math.sin(e),d[t]=0,f[t]=1}else{let e=t/(16384-m)*o;c[t]=1,p[t]=0,d[t]=Math.cos(e),f[t]=Math.sin(e)}let g=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...l,gain:0}),y=i(t,{...u,curve:c}),b=n(t,{...l,gain:0}),x=i(t,{...u,curve:p}),w=i(t,{...u,curve:a}),T=n(t,{...l,gain:0}),k=i(t,{...u,curve:d}),C=n(t,{...l,gain:0}),A=i(t,{...u,curve:f});return{connectGraph(){s.connect(g),s.connect(void 0===w.inputs?w:w.inputs[0]),g.connect(v,0),g.connect(b,0),g.connect(T,1),g.connect(C,1),w.connect(r),r.connect(void 0===y.inputs?y:y.inputs[0]),r.connect(void 0===x.inputs?x:x.inputs[0]),r.connect(void 0===k.inputs?k:k.inputs[0]),r.connect(void 0===A.inputs?A:A.inputs[0]),y.connect(v.gain),x.connect(b.gain),k.connect(T.gain),A.connect(C.gain),v.connect(h,0,0),T.connect(h,0,0),b.connect(h,0,1),C.connect(h,0,1)},disconnectGraph(){s.disconnect(g),s.disconnect(void 0===w.inputs?w:w.inputs[0]),g.disconnect(v,0),g.disconnect(b,0),g.disconnect(T,1),g.disconnect(C,1),w.disconnect(r),r.disconnect(void 0===y.inputs?y:y.inputs[0]),r.disconnect(void 0===x.inputs?x:x.inputs[0]),r.disconnect(void 0===k.inputs?k:k.inputs[0]),r.disconnect(void 0===A.inputs?A:A.inputs[0]),y.disconnect(v.gain),x.disconnect(b.gain),k.disconnect(T.gain),A.disconnect(C.gain),v.disconnect(h,0,0),T.disconnect(h,0,0),b.disconnect(h,0,1),C.disconnect(h,0,1)}}})(t,h,c,p);throw s()};return(e,{channelCount:i,channelCountMode:a,pan:o,...l})=>{if("max"===a)throw s();let u=t(e,{...l,channelCount:1,channelCountMode:a,numberOfInputs:2}),c=n(e,{...l,channelCount:i,channelCountMode:a,gain:1}),p=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:o}),{connectGraph:d,disconnectGraph:f}=h(e,i,c,p,u);Object.defineProperty(p.gain,"defaultValue",{get:()=>0}),Object.defineProperty(p.gain,"maxValue",{get:()=>1}),Object.defineProperty(p.gain,"minValue",{get:()=>-1});let m=!1;return r(tL({get bufferSize(){return},get channelCount(){return c.channelCount},set channelCount(value){c.channelCount!==value&&(m&&f(),{connectGraph:d,disconnectGraph:f}=h(e,value,c,p,u),m&&d()),c.channelCount=value},get channelCountMode(){return c.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw s();c.channelCountMode=value},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(value){c.channelInterpretation=value},get context(){return c.context},get inputs(){return[c]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get pan(){return p.gain},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])},u),()=>{d(),m=!0},()=>{f(),m=!1})}})(eL,tB,tz,ne,tX,eB),tX),no=((t,e,n,i,s)=>()=>{let r=new WeakMap,a=async(a,o)=>{let l=n(a),u=l.context===o;return u||(l=e(o,{channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value})),r.set(o,l),u?await t(o,a.pan,l.pan):await i(o,a.pan,l.pan),"inputs"in l?await s(a,o,l.inputs[0]):await s(a,o,l),l};return{render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}})(eE,na,te,eR,eu),nl=((t,e,n,i,s,r)=>class extends t{constructor(t,a){let o=s(t),l=n(o,{...tJ,...a}),u=r(o);super(t,!1,l,u?i():null),this._pan=e(this,u,l.pan)}get pan(){return this._pan}})(ex,eV,na,no,ec,ed),nu=((t,e,n)=>()=>{let i=new WeakMap,s=async(s,r)=>{let a=e(s);return a.context!==r&&(a=t(r,{channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample})),i.set(r,a),"inputs"in a?await n(s,r,a.inputs[0]):await n(s,r,a),a};return{render(t,e){let n=i.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}})(ne,te,eu),nh=((t,e,n,i,s,r,a)=>class extends t{constructor(t,e){let o=s(t),l=n(o,{...t0,...e});super(t,!0,l,r(o)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(ex,tA,ne,nu,ec,ed,eF),nc=(t=>null!==t&&t.isSecureContext)(ea),np=(t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(ea),nd=new WeakMap,nf=((t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i})(nd,ep),nm=nc?((t,e,n,i,s,r,a,o,l,u,h,c,p)=>{let d=0;return(f,m,g={credentials:"omit"})=>{let v=h.get(f);if(void 0!==v&&v.has(m))return Promise.resolve();let y=u.get(f);if(void 0!==y){let t=y.get(m);if(void 0!==t)return t}let b=r(f),w=void 0===b.audioWorklet?s(m).then(([t,e])=>{let[i,s]=C(t,e);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${s}
})})(window,'_AWGS')`)}).then(()=>{let t=p._AWGS.pop();if(void 0===t)throw SyntaxError();i(b.currentTime,b.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();let i=x.get(b);if(void 0!==i){if(i.has(t))throw e();S(n),A(n.parameterDescriptors),i.set(t,n)}else S(n),A(n.parameterDescriptors),x.set(b,new Map([[t,n]]))},b.sampleRate,void 0,void 0))}):Promise.all([s(m),Promise.resolve(t(c,c))]).then(([[t,e],n])=>{let i=d+1;d=i;let[s,r]=C(t,e),u=new Blob([`${s};((AudioWorkletProcessor,registerProcessor)=>{${r}
})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(u);return b.audioWorklet.addModule(h,g).then(()=>{if(o(b))return b;let t=a(b);return t.audioWorklet.addModule(h,g).then(()=>t)}).then(t=>{if(null===l)throw SyntaxError();try{new l(t,`__sac${i}`)}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(h))});return void 0===y?u.set(f,new Map([[m,w]])):y.set(m,w),w.then(()=>{let t=h.get(f);void 0===t?h.set(f,new Set([m])):t.add(m)}).finally(()=>{let t=u.get(f);void 0!==t&&t.delete(m)}),w}})(er,tX,(t=>e=>new Promise((n,i)=>{if(null===t)return void i(SyntaxError());let s=t.document.head;if(null===s)i(SyntaxError());else{let r=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(o)};t.onerror=(e,n,s,r,a)=>n===o||n===t.location.href&&1===s&&1===r?(u(),i(a),!1):null!==l?l(e,n,s,r,a):void 0,r.onerror=()=>{u(),i(SyntaxError())},r.onload=()=>{u(),n()},r.src=o,r.type="module",s.appendChild(r)}}))(ea),np,(r=()=>new DOMException("","AbortError"),async t=>{try{let e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw r()}),ec,nf,ed,eb,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),s=URL.createObjectURL(n),r=!1,a=!1;try{await i.audioWorklet.addModule(s);let e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>a=!0,n.connect(e),n.start(0),await i.startRendering(),await new Promise(t=>setTimeout(t))}catch{}finally{URL.revokeObjectURL(s)}return r&&!a})(eb,ep),ea):void 0,n_=t=>eg(t)||ed(t),ng=((t,e,n,i,s,r,a,o,l,u,h,c,p,d,f,m,g,v,y,b)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new r(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new a(this,{numberOfOutputs:t})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(t=1){return new h(this,{maxDelayTime:t})}createDynamicsCompressor(){return new c(this)}createGain(){return new p(this)}createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new v(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t),t=>{throw"function"==typeof n&&n(t),t})}})(nm,ew,eO,eP,ej,eW,ez,eX,eZ,((t,e,n,i,s,r,a,o,l,u,h)=>(c,p)=>{let d=a(c)?c:r(c);if(s.has(p))return Promise.reject(n());try{s.add(p)}catch{}return e(l,()=>l(d))?d.decodeAudioData(p).then(n=>(tx(p).catch(()=>{}),e(o,()=>o(n))||h(n),t.add(n),n)):new Promise((e,n)=>{let s=async()=>{try{await tx(p)}catch{}},r=t=>{n(t),s()};try{d.decodeAudioData(p,n=>{"function"!=typeof n.copyFromChannel&&(u(n),U(n)),t.add(n),s().then(()=>e(n))},t=>{null===t?r(i()):r(t)})}catch(t){r(t)}})})(eT,er,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,ec,n_,P,tE,eA,eS),e$,eJ,eK,e2,e4,e7,ns,nr,nl,nh),nv=((t,e,n,i)=>class extends t{constructor(t,s){let r=n(t),a=e(r,s);if(i(r))throw TypeError();super(t,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(ex,(t,e)=>t.createMediaElementSource(e.mediaElement),ec,ed),ny=((t,e,n,i)=>class extends t{constructor(t,s){let r=n(t);if(i(r))throw TypeError();let a=e(r,{...tI,...s});super(t,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(ex,(t,e)=>{let n=t.createMediaStreamDestination();return tR(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},ec,ed),nb=((t,e,n,i)=>class extends t{constructor(t,s){let r=n(t),a=e(r,s);if(i(r))throw TypeError();super(t,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(ex,(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:+(t.id>e.id));let i=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(s,"mediaStream",{value:e}),s},ec,ed),nx=((t,e,n)=>class extends t{constructor(t,i){super(t,!0,e(n(t),i),null)}})(ex,(t,{mediaStreamTrack:e})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(e);let n=new MediaStream([e]),i=t.createMediaStreamSource(n);if("audio"!==e.kind)throw tA();if(ed(t))throw TypeError();return i},ec),nw=((t,e,n,i,s,r,a,o,l)=>class extends t{constructor(t={}){let e;if(null===l)throw Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw i();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);let{latencyHint:s}=t,{sampleRate:r}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===s?512/r:"interactive"===s||void 0===s?256/r:"playback"===s?1024/r:128*Math.max(2,Math.min(128,Math.round(s*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";let t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),H(this)}))}createMediaElementSource(t){return new s(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new a(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new o(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{let n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}})(ng,tA,tX,tK,nv,ny,nb,nx,e_),nT=t=>{let e=e3.get(t);if(void 0===e)throw Error("The context has no set of AudioWorkletNodes.");return e},nk=(t,e)=>{nT(t).add(e)},nC=(t,e,n=0,i=0)=>{let s=t[n];if(void 0===s)throw q();return to(e)?s.connect(e,0,i):s.connect(e,0)},nA=(t,e)=>{nT(t).delete(e)},nS=(t=>(e,n,i,s=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?tT(t,e,n).disconnect():to(n)?void 0===i?e.forEach(t=>t.disconnect(n)):void 0===s?tT(t,e,i).disconnect(n,0):tT(t,e,i).disconnect(n,0,s):void 0===i?e.forEach(t=>t.disconnect(n)):tT(t,e,i).disconnect(n,0))(q),nO=new WeakMap,nM=((t,e,n,i,s,r,a,o,l,u,h,c,p)=>(d,f,m,g)=>{let v,y;if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();let b=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(b.some(t=>t<1))throw l();if(b.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();let x=g.channelCount*g.numberOfInputs,T=b.reduce((t,e)=>t+e,0),k=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(x+k>6||T>6)throw l();let C=new MessageChannel,A=[],S=[];for(let t=0;t<g.numberOfInputs;t+=1)A.push(a(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),S.push(s(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let O=[];if(void 0!==m.parameterDescriptors)for(let{defaultValue:t,maxValue:e,minValue:n,name:i}of m.parameterDescriptors){let s=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===t?0:t});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),O.push(s)}let M=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,x+k)}),I=tU(f,d.sampleRate),E=o(d,I,x+k,Math.max(1,T)),D=s(d,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),R=[];for(let t=0;t<g.numberOfOutputs;t+=1)R.push(i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[t]}));for(let t=0;t<g.numberOfInputs;t+=1){A[t].connect(S[t]);for(let e=0;e<g.channelCount;e+=1)S[t].connect(M,e,t*g.channelCount+e)}let N=new th(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{let n=O[e];return n.connect(M,0,x+e),n.start(0),[t,n.offset]}));M.connect(E);let V=g.channelInterpretation,P=null,q=0===g.numberOfOutputs?[E]:R,U={get bufferSize(){return I},get channelCount(){return g.channelCount},set channelCount(_){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){throw n()},get channelInterpretation(){return V},set channelInterpretation(value){for(let t of A)t.channelInterpretation=value;V=value},get context(){return E.context},get inputs(){return A},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return P},set onprocessorerror(value){"function"==typeof P&&U.removeEventListener("processorerror",P),"function"==typeof(P="function"==typeof value?value:null)&&U.addEventListener("processorerror",P)},get parameters(){return N},get port(){return C.port2},addEventListener:(...t)=>E.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,q),disconnect:u.bind(null,q),dispatchEvent:(...t)=>E.dispatchEvent(t[0]),removeEventListener:(...t)=>E.removeEventListener(t[0],t[1],t[2])},F=new Map;C.port1.addEventListener=(v=C.port1.addEventListener,(...t)=>{if("message"===t[0]){let e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){let n=F.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(d.currentTime,d.sampleRate,()=>e(t))},F.set(e,t[1]))}}return v.call(C.port1,t[0],t[1],t[2])}),C.port1.removeEventListener=(y=C.port1.removeEventListener,(...t)=>{if("message"===t[0]){let e=F.get(t[1]);void 0!==e&&(F.delete(t[1]),t[1]=e)}return y.call(C.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(C.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&C.port1.removeEventListener("message",j),"function"==typeof(j="function"==typeof t?t:null)&&(C.port1.addEventListener("message",j),C.port1.start())}}),m.prototype.port=C.port1;let B=null;((t,e,n,i)=>{let s=w.get(t);void 0===s&&(s=new WeakMap,w.set(t,s));let r=tF(n,i);return s.set(e,r),r})(d,U,m,g).then(t=>B=t);let L=tf(g.numberOfInputs,g.channelCount),W=tf(g.numberOfOutputs,b),z=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{}),H=!0,G=()=>{g.numberOfOutputs>0&&E.disconnect(D);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=R[t];for(let i=0;i<b[t];i+=1)D.disconnect(n,e+i,i);e+=b[t]}},X=new Map;E.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==B){let n=c(U);for(let i=0;i<I;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)tp(t,L[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{tp(t,z,e,x+n,i)});for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<b[t];e+=1)0===W[t][e].byteLength&&(W[t][e]=new Float32Array(128));try{let t=L.map((t,e)=>{if(n[e].size>0)return X.set(e,I/128),t;let i=X.get(e);return void 0===i?[]:(t.every(t=>t.every(t=>0===t))&&(1===i?X.delete(e):X.set(e,i-1)),t)});H=h(d.currentTime+i/d.sampleRate,d.sampleRate,()=>B.process(t,W,z));for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let s=0;s<b[t];s+=1)td(e,W[t],s,n+s,i);n+=b[t]}}catch(t){H=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!H){for(let t=0;t<g.numberOfInputs;t+=1){A[t].disconnect(S[t]);for(let e=0;e<g.channelCount;e+=1)S[i].disconnect(M,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){let t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){let t=O[e];t.disconnect(M,0,x+e),t.stop()}}M.disconnect(E),E.onaudioprocess=null,Y?G():Q();break}}}};let Y=!1,Z=a(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$=()=>E.connect(Z).connect(d.destination),Q=()=>{E.disconnect(Z),Z.disconnect()};return $(),p(U,()=>{if(H){Q(),g.numberOfOutputs>0&&E.connect(D);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){let n=R[t];for(let i=0;i<b[t];i+=1)D.connect(n,e+i,i);e+=b[t]}}Y=!0},()=>{H&&($(),G()),Y=!1})})(nC,q,tA,eL,tB,eG,tz,tG,tX,nS,np,t=>O(nO,t),eB),nI=((t,e,n,i,s)=>(r,a,o,l,u,h)=>{if(null!==o)try{let e=new o(r,l,h),i=new Map,a=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>a,set:t=>{"function"==typeof a&&e.removeEventListener("processorerror",a),a="function"==typeof t?t:null,"function"==typeof a&&e.addEventListener("processorerror",a)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t="function"==typeof n[1]?n[1]:"object"==typeof n[1]&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){let e=i.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},i.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t=i.get(n[1]);void 0!==t&&(i.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==h.numberOfOutputs){let t=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(r.destination),s(e,()=>t.disconnect(),()=>t.connect(r.destination))}return e}catch(t){if(11===t.code)throw i();throw t}if(void 0===u)throw i();return(t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(h),e(r,a,u,h)})(tA,nM,tz,tX,eB),nE=((t,e,n,i,s,r,a,o,l,u,h,c,p,d,f,m)=>(g,v,y)=>{let b=new WeakMap,x=null,w=async(o,w)=>{let T=h(o),k=null,C=T.context===w,A=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===c){let t=A.reduce((t,e)=>t+e,0),n=s(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let t=0;t<o.numberOfOutputs;t+=1)r.push(i(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[t]}));let u=a(w,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});u.connect=e.bind(null,r),u.disconnect=l.bind(null,r),k=[n,r,u]}else C||(T=new c(w,g));if(b.set(w,null===k?T:k[2]),null!==k){if(null===x){if(void 0===y)throw Error("Missing the processor constructor.");if(null===p)throw Error("Missing the native OfflineAudioContext constructor.");let t=o.channelCount*o.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,l=async()=>{let l=new p(n,128*Math.ceil(o.context.length/128),w.sampleRate),u=[],h=[];for(let t=0;t<v.numberOfInputs;t+=1)u.push(a(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),h.push(s(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let c=await Promise.all(Array.from(o.parameters.values()).map(async t=>{let e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(l,t,e.offset),e})),g=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<v.numberOfInputs;t+=1){u[t].connect(h[t]);for(let e=0;e<v.channelCount;e+=1)h[t].connect(g,e,t*v.channelCount+e)}for(let[e,n]of c.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map(t=>f(o,l,t))),m(l)};x=tm(o,0===n?null:await l(),w,v,A,y,u)}let t=await x,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,c]=k;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let t=0,e=0;t<o.numberOfOutputs;t+=1){let n=h[t];for(let i=0;i<A[t];i+=1)l.connect(n,e+i,i);e+=A[t]}return c}if(C)for(let[e,n]of o.parameters.entries())await t(w,n,T.parameters.get(e));else for(let[t,e]of o.parameters.entries())await d(w,e,T.parameters.get(t));return await f(o,w,T),T};return{render(t,e){o(e,t);let n=b.get(e);return void 0!==n?Promise.resolve(n):w(t,e)}}})(eE,nC,eD,eL,tB,eG,tz,nA,nS,np,te,eb,ep,eR,eu,e1),nD=t=>nd.get(t),nR=(t,e)=>{nO.set(t,e)},nN=nc?((t,e,n,i,s,r,a,o,l,u,h,c,p,d)=>class extends e{constructor(e,d,f){var m;let g=o(e),v=l(g),y=h({...tc,...f});p(y);let b=x.get(g),w=null==b?void 0:b.get(d),T=s(v||"closed"!==g.state?g:null!=(m=a(g))?m:g,v?null:e.baseLatency,u,d,w,y);super(e,!0,T,v?i(d,y,w):null);let k=[];T.parameters.forEach((t,e)=>{let i=n(this,v,t);k.push([e,i])}),this._nativeAudioWorkletNode=T,this._onprocessorerror=null,this._parameters=new th(k),v&&t(g,this);let{activeInputs:C}=r(this);c(T,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){let e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;let n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(nk,ex,eV,nE,nI,L,nD,ec,ed,eb,t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),nR,t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},t9):void 0,nV=((t,e)=>(n,i,s)=>{if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,s)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(tX,ep),nP=((t,e,n,i,s,r,a,o)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(i(u)).map(t=>n(t).render(t,u)))).then(()=>s(u)).then(n=>("function"!=typeof n.copyFromChannel?(a(n),U(n)):e(r,()=>r(n))||o(n),t.add(n),n)))(eT,er,el,nT,e1,P,eA,eS),nq=((t,e,n,i,s)=>class extends t{constructor(t,n,s){let r;if("number"==typeof t&&void 0!==n&&void 0!==s)r={length:n,numberOfChannels:t,sampleRate:s};else if("object"==typeof t)r=t;else throw Error("The given parameters are not valid.");let{length:a,numberOfChannels:o,sampleRate:l}={...tY,...r},u=i(o,a,l);e(tE,()=>tE(u))||u.addEventListener("statechange",(()=>{let t=0,e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,o),this._length=a,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,H(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}})(ng,er,tA,nV,nP),nU=((t,e)=>n=>e(t.get(n))||e(n))(v,eg),nF=t=>f.has(t)||ev(t),nj=t=>g.has(t)||ey(t),nB=((t,e)=>n=>e(t.get(n))||e(n))(v,ed);function nL(t){return void 0===t}function nW(t){return void 0!==t}function nz(t){return"number"==typeof t}function nH(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function nG(t){return"boolean"==typeof t}function nX(t){return Array.isArray(t)}function nY(t){return"string"==typeof t}function nZ(t){return nY(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function n$(t,e){if(!t)throw Error(e)}function nQ(t,e,n=1/0){if(!(e<=t&&t<=n))throw RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function nJ(t){t.isOffline||"running"===t.state||n2('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let nK=!1,n0=!1,n1=console;function n2(...t){n1.warn(...t)}let n8="object"==typeof self?self:null,n3=n8&&(n8.hasOwnProperty("AudioContext")||n8.hasOwnProperty("webkitAudioContext"));var n4=n(71450);class n5{constructor(t,e,n,i){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){let t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=new Worker(URL.createObjectURL(t));e.onmessage=this._callback.bind(this),this._worker=e}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null==(e=this._worker)||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function n6(t,...e){if(!e.length)return t;let n=e.shift();if(nH(t)&&nH(n))for(let e in n){var i,s;(i=e,s=n[e],"value"===i||nj(s)||nF(s)||s instanceof eO)?t[e]=n[e]:nH(n[e])?(t[e]||Object.assign(t,{[e]:{}}),n6(t[e],n[e])):Object.assign(t,{[e]:n[e]})}return n6(t,...e)}function n7(t,e,n=[],i){let s={},r=Array.from(e);if(nH(r[0])&&i&&!Reflect.has(r[0],i)&&(Object.keys(r[0]).some(e=>Reflect.has(t,e))||(n6(s,{[i]:r[0]}),n.splice(n.indexOf(i),1),r.shift())),1===r.length&&nH(r[0]))n6(s,r[0]);else for(let t=0;t<n.length;t++)nW(r[t])&&(s[n[t]]=r[t]);return n6(t,s)}function n9(t,e){return nL(t)?e:t}function it(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}class ie{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||n8&&this.toString()===n8.TONE_DEBUG_CLASS)&&function(...t){n1.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function ii(t,e){return t>e+1e-6}function is(t,e){return ii(t,e)||ia(t,e)}function ir(t,e){return t+1e-6<e}function ia(t,e){return 1e-6>Math.abs(t-e)}ie.version=o;class io extends ie{constructor(){super(),this.name="Timeline",this._timeline=[];let t=n7(io.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(n$(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let e=this._timeline[this.length-1];n$(is(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){let e=this._timeline.indexOf(t);return -1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){let n=this._search(t,e);return -1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){let n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){let e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];let n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(ia(this._timeline[e].time,t)){for(let n=e;n>=0;n--)if(ia(this._timeline[n].time,t))e=n;else break;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&is(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){let e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){let e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return -1;let n=0,i=this._timeline.length,s=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<s;){let i=Math.floor(n+(s-n)/2),r=this._timeline[i],a=this._timeline[i+1];if(ia(r[e],t)){for(let n=i;n<this._timeline.length;n++)if(ia(this._timeline[n][e],t))i=n;else break;return i}if(ir(r[e],t)&&ii(a[e],t))return i;ii(r[e],t)?s=i:n=i+1}return -1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){let n=this._search(t);return -1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){let n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),s=this._search(e);return -1!==i&&-1!==s?(this._timeline[i].time!==t&&(i+=1),this._timeline[s].time===e&&(s-=1),this._iterate(n,i,s)):-1===i&&this._iterate(n,0,s),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){let n=this._search(t);if(-1!==n&&ia(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0;e--)if(ia(this._timeline[e].time,t))i=e;else break;this._iterate(t=>{e(t)},i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let il=[];function iu(t){il.push(t)}let ih=[];function ic(t){ih.push(t)}class ip extends ie{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(t=>{nL(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){let n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach(t=>{if(nL(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(nL(e))this._events[t]=[];else{let n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){let n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{let n=Object.getOwnPropertyDescriptor(ip.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class id extends ip{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class im extends id{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new io,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let n=n7(im.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null==(t=arguments[0])?void 0:t.latencyHint)||""):(this._context=new nw({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new n5(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null==(e=arguments[0])?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){if(!this._initialized){var t;t=this,il.forEach(e=>e(t)),this._initialized=!0}return this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return n$(nU(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return n$(nU(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return n$(nU(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){n$(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){n$(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){n$(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){n$(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){var n;return n=this.rawContext,n$(nW(nN),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(null==n8?void 0:n8.BaseAudioContext)?null==n8?void 0:n8.AudioWorkletNode:nN)(n,t,e)}addAudioWorkletModule(t){return(0,n4.sH)(this,void 0,void 0,function*(){n$(nW(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return(0,n4.sH)(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return nU(this._context)?this._context.resume():Promise.resolve()}close(){return(0,n4.sH)(this,void 0,void 0,function*(){var t;nU(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,ih.forEach(e=>e(t)))})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;let i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){let t=this.now();this._timeouts.forEachBefore(t,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(t,e){this._timeoutIds++;let n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){let n=++this._timeoutIds,i=()=>{let s=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:s+e})};return i(),n}}class i_ extends id{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return(0,n4.sH)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function ig(t,e){nX(e)?e.forEach(e=>ig(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function iv(t,e){nX(e)?e.forEach(e=>iv(t,e)):Object.defineProperty(t,e,{writable:!0})}let iy=()=>{};class ib extends ie{constructor(){super(),this.name="ToneAudioBuffer",this.onload=iy;let t=n7(ib.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,nY(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:iy,onload:iy,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ik().sampleRate}set(t){return t instanceof ib?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return(0,n4.sH)(this,void 0,void 0,function*(){let e=ib.load(t).then(t=>{this.set(t),this.onload(this)});ib.downloads.push(e);try{yield e}finally{let t=ib.downloads.indexOf(e);ib.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let e=nX(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,s=ik(),r=s.createBuffer(n,i,s.sampleRate),a=e||1!==n?t:[t];for(let t=0;t<n;t++)r.copyToChannel(a[t],t);return this._buffer=r,this}toMono(t){if(nz(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length),e=this.numberOfChannels;for(let n=0;n<e;n++){let e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(nz(t))return this.getChannelData(t);{if(1===this.numberOfChannels)return this.toArray(0);let t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){n$(this.loaded,"Buffer is not loaded");let n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);n$(n<i,"The start time must be less than the end time");let s=ik().createBuffer(this.numberOfChannels,i-n,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)s.copyToChannel(this.getChannelData(t).subarray(n,i),t);return new ib(s)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new ib().fromArray(t)}static fromUrl(t){return(0,n4.sH)(this,void 0,void 0,function*(){let e=new ib;return yield e.load(t)})}static load(t){return(0,n4.sH)(this,void 0,void 0,function*(){let e=""===ib.baseUrl||ib.baseUrl.endsWith("/")?ib.baseUrl:ib.baseUrl+"/",n=yield fetch(e+t);if(!n.ok)throw Error(`could not load url: ${t}`);let i=yield n.arrayBuffer();return yield ik().decodeAudioData(i)})}static supportsType(t){let e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return(0,n4.sH)(this,void 0,void 0,function*(){for(yield Promise.resolve();ib.downloads.length;)yield ib.downloads[0]})}}ib.baseUrl="",ib.downloads=[];class ix extends im{constructor(){var t,e,n,i,s,r;super({clockSource:"offline",context:(t=arguments[0],nB(t))?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],i=arguments[2],new nq(e,n,i)),lookAhead:0,updateInterval:(s=arguments[0],nB(s))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,r=arguments[0],this._duration=nB(r)?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,n4.sH)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;let n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(){return(0,n4.sH)(this,arguments,void 0,function*(t=!0){return yield this.workletsAreReady(),yield this._renderClock(t),new ib((yield this._context.startRendering()))})}close(){return Promise.resolve()}}let iw=new i_,iT=iw;function ik(){return iT===iw&&n3&&function(t,e=!1){e&&iT.dispose(),iT=nU(t)?new im(t):nB(t)?new ix(t):t}(new im),iT}function iC(){return iT.resume()}if(n8&&!n8.TONE_SILENCE_LOGGING){let t=` * Tone.js v${o} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function iA(t){return Math.log(t)/Math.LN10*20}function iS(t){return Math.pow(2,t/12)}let iO=440;function iM(t){return Math.round(iI(t))}function iI(t){return 69+12*Math.log2(t/iO)}function iE(t){return iO*Math.pow(2,(t-69)/12)}class iD extends ie{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{let n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof iD&&this.fromType(this._val),nL(this._val))return this._noArg();if(nY(this._val)&&nL(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(nH(this._val)){let t=0;for(let e in this._val)if(nW(this._val[e])){let n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(nW(this._units)){let t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return nY(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class iR extends iD{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let e=new iR(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){let n=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),s=Math.round(i/n);return i+(s*n-i)*e}toNotation(){let t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){let n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],i=new iR(this.context,e[0]).toSeconds();return e.forEach(e=>{let s=new iR(this.context,e).toSeconds();Math.abs(s-t)<Math.abs(i-t)&&(n=e,i=s)}),n}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),e=this.valueOf()/t,n=Math.floor((e=parseFloat(e.toFixed(4)))/this._getTimeSignature()),i=e%1*4;e=Math.floor(e)%this._getTimeSignature();let s=i.toString();return s.length>3&&(i=parseFloat(parseFloat(s).toFixed(3))),[n,e,i].join(":")}toTicks(){let t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return iM(this.toFrequency())}_now(){return this.context.now()}}class iN extends iR{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return iO}static set A4(t){iO=t}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:iN.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){let n=iV[t.toLowerCase()]+(parseInt(e,10)+1)*12;return"midi"===this.defaultUnits?n:iN.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new iN(this.context,this.valueOf()*iS(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return iM(this.valueOf())}toNote(){let t=Math.round(12*Math.log2(this.toFrequency()/iN.A4))+57,e=Math.floor(t/12);return e<0&&(t+=-12*e),iP[t%12]+e.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1);return Math.floor(this.valueOf()/t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return iE(t)}static ftom(t){return iM(t)}}let iV={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},iP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class iq extends iR{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class iU extends ie{constructor(){super();let t=n7(iU.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ik()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return nL(t)&&nK&&!n0&&(n0=!0,n2("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing")),new iR(this.context,t).toSeconds()}toFrequency(t){return new iN(this.context,t).toFrequency()}toTicks(t){return new iq(this.context,t).toTicks()}_getPartialProperties(t){let e=this.get();return Object.keys(e).forEach(n=>{nL(t[n])&&delete e[n]}),e}get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){let n=this[e];nW(n)&&nW(n.value)&&nW(n.setValueAtTime)?t[e]=n.value:n instanceof iU?t[e]=n._getPartialProperties(t[e]):nX(n)||nz(n)||nY(n)||nG(n)?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&nW(this[e])&&(this[e]&&nW(this[e].value)&&nW(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof iU?this[e].set(t[e]):this[e]=t[e])}),this}}class iF extends io{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return nQ(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){let n=this._search(e);for(let e=n;e>=0;e--){let n=this._timeline[e];if(n.state===t)return n}}getNextState(t,e){let n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){let n=this._timeline[e];if(n.state===t)return n}}}class ij extends iU{constructor(){let t=n7(ij.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,n$(nW(t.param)&&(nj(t.param)||t.param instanceof ij),"param must be an AudioParam");!nj(t.param);)t.param=t.param._param;this._swappable=!!nW(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new io(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,nW(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(iU.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return nW(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return nW(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return nW(this.maxValue)&&nW(this.minValue)&&nQ(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){if(this.convert&&!this.overridden)if(this._is(t,"time"))return this.toSeconds(t);else if(this._is(t,"decibels"))return Math.pow(10,t/20);else if(this._is(t,"frequency"))return this.toFrequency(t);else return t;return this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?iA(t):t}setValueAtTime(t,e){let n=this.toSeconds(e),i=this._fromType(t);return n$(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){let e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e),s=this._initialValue;if(null===i)s=this._initialValue;else if("setTargetAtTime"===i.type&&(null===n||"setValueAtTime"===n.type)){let t,n=this._events.getBefore(i.time);t=null===n?this._initialValue:n.value,"setTargetAtTime"===i.type&&(s=this._exponentialApproach(i.time,t,i.value,i.constant,e))}else if(null===n)s=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){let e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}s="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else s=i.value;return this._toType(s)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){let n=this._fromType(t),i=this.toSeconds(e);return n$(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=ia(n,0)?this._minOutput:n,this._assertRange(n);let i=this.toSeconds(e);return n$(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e);let i=Math.log((n=this.toSeconds(n))+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){let i=this._fromType(t);n$(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");let s=this.toSeconds(e);return this._assertRange(i),n$(isFinite(i)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:s,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,s,n),this._param.setTargetAtTime(i,s,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);let s=this._fromType(t[0])*i;this.setValueAtTime(this._toType(s),e);let r=n/(t.length-1);for(let n=1;n<t.length;n++){let s=this._fromType(t[n])*i;this.linearRampToValueAtTime(this._toType(s),e+n*r)}return this}cancelScheduledValues(t){let e=this.toSeconds(t);return n$(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){let e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));n$(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);let i=this._events.get(e),s=this._events.getAfter(e);return i&&ia(i.time,e)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),"linearRampToValueAtTime"===s.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===s.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){let e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);let n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){let i=this._events.getAfter(n.time),s=i?i.time:e+2,r=(s-e)/10;for(let n=e;n<s;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){n$(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,s){return n+(e-n)*Math.exp(-(s-t)/i)}_linearInterpolate(t,e,n,i,s){return e+(s-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,s){return e*Math.pow(i/e,(s-t)/(n-t))}}class iB extends iU{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return nW(this.input)?nj(this.input)||this.input instanceof ij?1:this.input.numberOfInputs:0}get numberOfOutputs(){return nW(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return nW(t)&&(t instanceof iB||nF(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();n$(t.length>0,"ToneAudioNode does not have any internal nodes");let e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return iW(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return n2("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,i=0){if(nW(e))for(;e instanceof iB;)e=e.input;for(;!nF(t);)nW(t.output)&&(t=t.output);nj(e)?t.disconnect(e,n):nF(e)?t.disconnect(e,n,i):t.disconnect()}(this,t,e,n),this}chain(...t){return iL(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),nW(this.input)&&(this.input instanceof iB?this.input.dispose():nF(this.input)&&this.input.disconnect()),nW(this.output)&&(this.output instanceof iB?this.output.dispose():nF(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function iL(...t){let e=t.shift();t.reduce((t,e)=>(t instanceof iB?t.connect(e):nF(t)&&iW(t,e),e),e)}function iW(t,e,n=0,i=0){for(n$(nW(t),"Cannot connect from undefined node"),n$(nW(e),"Cannot connect to undefined node"),(e instanceof iB||nF(e))&&n$(e.numberOfInputs>0,"Cannot connect to node with no inputs"),n$(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof iB||e instanceof ij;)nW(e.input)&&(e=e.input);for(;t instanceof iB;)nW(t.output)&&(t=t.output);nj(e)?t.connect(e,n):t.connect(e,n,i)}class iz extends iB{constructor(){let t=n7(iz.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ij({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),ig(this,"gain")}static getDefaults(){return Object.assign(iB.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class iH extends iB{constructor(t){super(t),this.onended=iy,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new iz({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let e=this.toSeconds(t);return -1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(iB.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:iy})}_startGain(t,e=1){n$(-1===this._startTime,"Source cannot be started more than once");let n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){n$(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();let e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==iy&&(this.onended(this),this.onended=iy,!this.context.isOffline)){let t=()=>this.dispose();"undefined"!=typeof requestIdleCallback?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),n$(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=iy,this}}class iG extends iH{constructor(){let t=n7(iG.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),iW(this._source,this._gainNode),this.offset=new ij({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(iH.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class iX extends iB{constructor(){let t=n7(iX.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new iG({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(iB.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return iY(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function iY(t,e,n,i){(e instanceof ij||nj(e)||e instanceof iX&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof iX&&(e.overridden=!0)),iW(t,e,n,i)}class iZ extends ij{constructor(){let t=n7(iZ.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new io(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ij.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);let i=this._fromType(t),s=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let t=0;t<=r;t++){let r=n*t+e,a=this._exponentialApproach(s.time,s.value,i,n,r);this.linearRampToValueAtTime(this._toType(a),r)}return this}setValueAtTime(t,e){let n=this.toSeconds(e);super.setValueAtTime(t,e);let i=this._events.get(n),s=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(s,n),0),this}linearRampToValueAtTime(t,e){let n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);let i=this._events.get(n),s=this._events.previousEvent(i);return i.ticks=Math.max(this._getTicksUntilEvent(s,n),0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);let n=this._fromType(t),i=this._events.get(e),s=Math.round(Math.max((e-i.time)*10,1)),r=(e-i.time)/s;for(let t=0;t<=s;t++){let s=r*t+i.time,a=this._exponentialInterpolate(i.time,i.value,e,n,s);this.linearRampToValueAtTime(this._toType(a),s)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(nL(t.ticks)){let e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}let n=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),s=this._events.get(e);return s&&s.time===e&&"setValueAtTime"===s.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){let e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){let e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){let i=this._fromType(this.getValueAtTime(e.time)),s=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),r=Math.sqrt(Math.pow(i,2)-2*s*(e.ticks-t)),a=(-i+r)/s;return(a>0?a:(-i-r)/s)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){let n=this.toSeconds(e),i=this.toSeconds(t),s=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-s}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class i$ extends iX{constructor(){let t=n7(i$.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new iZ({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(iX.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class iQ extends iU{constructor(){let t=n7(iQ.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new iF,this._tickOffset=new io,this._ticksAtTime=new io,this._secondsAtTime=new io,this.frequency=new i$({context:this.context,units:t.units,value:t.frequency}),ig(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},iU.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){let n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),nW(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){let e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){let t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){let e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i=this._ticksAtTime.get(e),s={state:"paused",time:e};this._state.add(s);let r=i||n,a=i?i.ticks:0,o=null;return this._state.forEachBetween(r.time,e+this.sampleTime,t=>{let e=r.time,n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(a=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(a+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==s.time&&(o={state:t.state,time:t.time,ticks:a})),r=t}),this._state.remove(s),o&&this._ticksAtTime.add(o),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);let e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=this._secondsAtTime.get(t),s=i||e,r=i?i.seconds:0,a=null;return this._state.forEachBetween(s.time,t+this.sampleTime,t=>{let e=s.time,i=this._tickOffset.get(t.time);i&&i.time>=s.time&&(r=i.seconds,e=i.time),"started"===s.state&&"started"!==t.state&&(r+=t.time-e,t.time!==n.time&&(a={state:t.state,time:t.time,seconds:r})),s=t}),this._state.remove(n),a&&this._secondsAtTime.add(a),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){let n=this._tickOffset.get(e),i=this._state.get(e),s=Math.max(n.time,i.time),r=this.frequency.getTicksAtTime(s)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e});let s=null;if(i&&"started"===i.state){let r=Math.max(i.time,t),a=this.frequency.getTicksAtTime(r),o=a-this.frequency.getTicksAtTime(i.time),l=Math.ceil(o)-o;l=ia(l,1)?0:l;let u=this.frequency.getTimeOfTick(a+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){s=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class iJ extends iU{constructor(){let t=n7(iJ.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=iy,this._lastUpdate=0,this._state=new iF("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new iQ({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ig(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(iU.getDefaults(),{callback:iy,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){nJ(this.context);let n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){let e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){let n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){let t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":let e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ip.mixin(iJ);class iK extends iB{constructor(){let t=n7(iK.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new iz({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,ig(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(iB.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class i0 extends iB{constructor(){let t=n7(i0.getDefaults(),arguments);super(t),this.name="Destination",this.input=new iK({context:this.context}),this.output=new iz({context:this.context}),this.volume=this.input.volume,iL(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(iB.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),iL(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}iu(t=>{t.destination=new i0({context:t})}),ic(t=>{t.destination.dispose()});class i1 extends iB{constructor(){super(...arguments),this.name="Listener",this.positionX=new ij({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ij({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ij({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ij({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ij({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ij({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ij({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ij({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ij({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(iB.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}iu(t=>{t.listener=new i1({context:t})}),ic(t=>{t.listener.dispose()});class i2 extends ie{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let t=n7(i2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;let n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:iy,onload:iy,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return n$(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=iy,i=iy){return nY(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new ib(this.baseUrl+e,n,i))):this._buffers.set(t.toString(),new ib(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class i8 extends iN{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return iM(super._frequencyToUnits(t))}_ticksToUnits(t){return iM(super._ticksToUnits(t))}_beatsToUnits(t){return iM(super._beatsToUnits(t))}_secondsToUnits(t){return iM(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return iE(this.toMidi())}transpose(t){return new i8(this.context,this.toMidi()+t)}}class i3 extends iq{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class i4 extends iU{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new io,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}iu(t=>{t.draw=new i4({context:t})}),ic(t=>{t.draw.dispose()});class i5 extends ie{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){n$(nW(t.time),"Events must have a time property"),n$(nW(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new i6(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){let e=[];for(let n of(this._root.search(t.time,e),e))if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=t.getBalance(),i=null;if(n>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){let e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){let e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){let e=t.getBalance();e>1&&t.left?0>t.left.getBalance()?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){let e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){let e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){let n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){let n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class i6{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){!(t>this.max)&&(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class i7 extends ie{constructor(t){super(),this.name="TimelineValue",this._timeline=new io({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){let e=this._timeline.get(t);return e?e.value:this._initialValue}}class i9 extends iB{constructor(){super(n7(i9.getDefaults(),arguments,["context"]))}connect(t,e=0,n=0){return iY(this,t,e,n),this}}class st extends i9{constructor(){let t=n7(st.getDefaults(),arguments,["mapping","length"]);(super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,nX(t.mapping)||t.mapping instanceof Float32Array)?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(iX.getDefaults(),{length:1024})}setMap(t,e=1024){let n=new Float32Array(e);for(let i=0;i<e;i++){let s=i/(e-1)*2-1;n[i]=t(s,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){n$(["none","2x","4x"].some(e=>e.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class se extends i9{constructor(){let t=n7(se.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new st({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(i9.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class sn{constructor(t,e){this.id=sn._eventId++,this._remainderTime=0;let n=Object.assign(sn.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:iy,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){let e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}sn._eventId=0;class si extends sn{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let n=Object.assign(si.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},sn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return ir(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new i3(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){ir(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new i3(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let e=this.transport.getTicksAtTime(t);ii(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ss extends iU{constructor(){let t=n7(ss.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new i7(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new io,this._repeatedEvents=new i5,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new iJ({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),ig(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(iU.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){let n=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new i3(this.context,2*this._swingTicks/3).toSeconds()*n}nK=!0,this._timeline.forEachAtTime(e,e=>e.invoke(t)),nK=!1}schedule(t,e){let n=new sn(this,{callback:t,time:new iq(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){let s=new si(this,{callback:t,duration:new iR(this.context,i).toTicks(),interval:new iR(this.context,e).toTicks(),time:new iq(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(t,e){let n=new sn(this,{callback:t,once:!0,time:new iq(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){let e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new i3(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),nW(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){nX(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new iR(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new iR(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new i3(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),e=this._clock.getTicksAtTime(t);return new i3(this.context,e).toBarsBeatsSixteenths()}set position(t){let e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){let e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(!this.loop)return 0;{let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let e=this.now();if("started"===this.state){let n=this._clock.getTicksAtTime(e),i=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),s=e+i;this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{let e=this.now(),n=this.getTicksAtTime(e),i=t-n%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){let n=this.now(),i=this.bpm,s=1/(60/i.getValueAtTime(n)/this.PPQ),r=[];if("time"===t.units){let t=1/64/s,e=new iz(t),n=new se(-1),a=new iz(t);i.chain(e,n,a),i=a,s=1/s,r=[e,n,a]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/s:0);let a=new iz(e);return i.connect(a),a.connect(t._param),r.push(a),this._syncedSignals.push({initial:t.value,nodes:r,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){let n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach(t=>t.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),iv(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ip.mixin(ss),iu(t=>{t.transport=new ss({context:t})}),ic(t=>{t.transport.dispose()});class sr extends iB{constructor(t){super(t),this.input=void 0,this._state=new iF("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=iy,this._syncedStop=iy,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new iK({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,ig(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(iB.getDefaults(),{mute:!1,onstop:iy,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=nL(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){let t=this._state.get(i);t&&(t.offset=this.toSeconds(n9(e,0)),t.duration=n?this.toSeconds(n):void 0);let s=this.context.transport.schedule(t=>{this._start(t,e,n)},i);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else nJ(this.context),this._start(i,e,n);else n$(ii(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=nL(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||nW(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){let t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(ii(e,0)){let n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){let i,s=e-this.toSeconds(n.time);n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{let e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=iy,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class sa extends iH{constructor(){let t=n7(sa.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,iW(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ij({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ib(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(iH.getDefaults(),{url:new ib,loop:!1,loopEnd:0,loopStart:0,onload:iy,onerror:iy,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){n$(this.buffer.loaded,"buffer is either not set or not loaded");let s=this.toSeconds(t);this._startGain(s,i),e=this.loop?n9(e,this.loopStart):n9(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){let t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;is(r,t)&&(r=(r-e)%n+e),ia(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ir(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,r)),nW(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(s+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function so(t,e){return(0,n4.sH)(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,i=new ix(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class sl extends iH{constructor(){let t=n7(sl.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],iW(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ij({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ij({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),ig(this,["frequency","detune"])}static getDefaults(){return Object.assign(iH.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class su extends sr{constructor(){let t=n7(su.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new iX({context:this.context,units:"frequency",value:t.frequency}),ig(this,"frequency"),this.detune=new iX({context:this.context,units:"cents",value:t.detune}),ig(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(sr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let e=this.toSeconds(t),n=new sl({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){let e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){let e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return su._periodicWaveCache.find(t=>{var e,n;return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every((t,e)=>n[e]===t))});{let t=su._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{let e=this._getCachedPeriodicWave();if(nW(e)){let{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),su._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),su._periodicWaveCache.length>100&&su._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){nQ(t,0);let e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)0===t?this.type=e:this.type=e+t.toString();else{let e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048,i=new Float32Array(2048),s=new Float32Array(n),r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[i,s]}else{let e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],n=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(let a=1;a<n;++a){let n,o=2/(a*Math.PI);switch(t){case"sine":n=+(a<=r),this._partials[a-1]=n;break;case"square":n=1&a?2*o:0,this._partials[a-1]=n;break;case"sawtooth":n=o*(1&a?1:-1),this._partials[a-1]=n;break;case"triangle":n=1&a?o*o*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=n;break;case"custom":n=this._partials[a-1];break;default:throw TypeError("Oscillator: invalid type: "+t)}0!==n?(i[a]=-n*Math.sin(e*a),s[a]=n*Math.cos(e*a)):(i[a]=0,s[a]=0)}return[i,s]}_inverseFFT(t,e,n){let i=0,s=t.length;for(let r=0;r<s;r++)i+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return i}getInitialValue(){let[t,e]=this._getRealImaginary(this._type,0),n=0,i=2*Math.PI;for(let s=0;s<32;s++)n=Math.max(this._inverseFFT(t,e,s/32*i),n);return Math.max(Math.min(-this._inverseFFT(t,e,this._phase)/n,1),-1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}su._periodicWaveCache=[];class sh extends i9{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new st({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class sc extends iX{constructor(){let t=n7(sc.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new iz({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(iX.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class sp extends sr{constructor(){let t=n7(sp.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new sh({context:this.context}),this._modulationNode=new iz({context:this.context}),this._carrier=new su({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new su({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new sc({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ig(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(su.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class sd extends sr{constructor(){let t=n7(sd.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new iz({context:this.context,gain:0}),this._carrier=new su({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new iX({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new su({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new sc({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new sc({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ig(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(su.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class sf extends sr{constructor(){let t=n7(sf.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new iz({context:this.context,gain:0}),this._thresh=new st({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new iX({context:this.context,units:"audioRange",value:t.width}),this._triangle=new su({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ig(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(sr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class sm extends sr{constructor(){let t=n7(sm.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new iX({context:this.context,units:"frequency",value:t.frequency}),this.detune=new iX({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,ig(this,["frequency","detune"])}static getDefaults(){return Object.assign(su.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,i)=>t.detune.value=e+n*i)}}get count(){return this._oscillators.length}set count(t){if(nQ(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){let n=new su({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):iy});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class s_ extends sr{constructor(){let t=n7(s_.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new sc({context:this.context,value:2}),this._pulse=new sf({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new su({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ig(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(sr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let sg={am:sp,fat:sm,fm:sd,oscillator:su,pulse:sf,pwm:s_};class sv extends sr{constructor(){let t=n7(sv.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new iX({context:this.context,units:"frequency",value:t.frequency}),this.detune=new iX({context:this.context,units:"cents",value:t.detune}),ig(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(su.getDefaults(),sd.getDefaults(),sp.getDefaults(),sm.getDefaults(),sf.getDefaults(),s_.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let e=sg[t],n=this.now();if(this._oscillator){let t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof sg[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&nz(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&nz(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&nY(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){return so(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function sy(t,e=1/0){let n=new WeakMap;return function(i,s){Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){nQ(i,t,e),n.set(this,i)}})}}function sb(t,e=1/0){let n=new WeakMap;return function(i,s){Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){nQ(this.toSeconds(i),t,e),n.set(this,i)}})}}class sx extends sr{constructor(){let t=n7(sx.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new ib({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(sr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:iy,onerror:iy,playbackRate:1,reverse:!1})}load(t){return(0,n4.sH)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=iy){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?n9(e,this._loopStart):n9(e,0);let i=this.toSeconds(e),s=n;n=n9(n,Math.max(this._buffer.duration-i,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);let a=new sa({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&nL(s)?a.start(t,i):a.start(t,i,r-this.toSeconds(this.fadeOut))}_stop(t){let e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var i;null==(i=[...this._activeSources].pop())||i.stop(t),this._start(t,e,n)}seek(t,e){let n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){let e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&nQ(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&nQ(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,n4.Cg)([sb(0)],sx.prototype,"fadeIn",void 0),(0,n4.Cg)([sb(0)],sx.prototype,"fadeOut",void 0);class sw extends iB{constructor(){let t=n7(sw.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new iX({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(iB.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(nY(t))return t;{let n;for(n in sT)if(sT[n][e]===t)return n;return t}}_setCurve(t,e,n){if(nY(n)&&Reflect.has(sT,n)){let i=sT[n];nH(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else if(nX(n)&&"_decayCurve"!==t)this[t]=n;else throw Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack),i=this.toSeconds(this.decay),s=this.getValueAtTime(t);if(s>0&&(n=(1-s)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let i=this._attackCurve;for(let t=1;t<i.length;t++)if(i[t-1]<=s&&s<=i[t]){(i=this._attackCurve.slice(t))[0]=s;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(i&&this.sustain<1){let s=e*this.sustain,r=t+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(s,i+r):this._sig.exponentialApproachValueAtTime(s,r,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let e=this.getValueAtTime(t);if(e>0){let n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(n$(nX(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return iY(this,t,e,n),this}asArray(){return(0,n4.sH)(this,arguments,void 0,function*(t=1024){let e=t/this.context.sampleRate,n=new ix(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=i+this.toSeconds(this.release),r=.1*s,a=s+r,o=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:n}));return o._sig.toDestination(),o.triggerAttackRelease(e*(i+r)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,n4.Cg)([sb(0)],sw.prototype,"attack",void 0),(0,n4.Cg)([sb(0)],sw.prototype,"decay",void 0),(0,n4.Cg)([sy(0,1)],sw.prototype,"sustain",void 0),(0,n4.Cg)([sb(0)],sw.prototype,"release",void 0);let sT=(()=>{let t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));let i=[];for(t=0;t<127;t++){let n=Math.sin(2*Math.PI*(e=t/127)*6.4-Math.PI/2)+1;i[t]=n/10+.83*e}i[127]=1;let s=[];for(t=0;t<128;t++)s[t]=Math.ceil(t/127*5)/5;let r=[];for(t=0;t<128;t++)e=t/127,r[t]=.5*(1-Math.cos(Math.PI*e));let a=[];for(t=0;t<128;t++){let n=Math.cos((4*Math.pow(e=t/127,3)+.2)*Math.PI*2*e);a[t]=Math.abs(n*(1-e))}function o(t){let e=Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:o(a),Out:a},cosine:{In:n,Out:n.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:i,Out:o(i)},sine:{In:r,Out:o(r)},step:{In:s,Out:o(s)}}})();class sk extends iB{constructor(){let t=n7(sk.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new iK({context:this.context,volume:t.volume}),this.volume=this._volume.volume,ig(this,"volume")}static getDefaults(){return Object.assign(iB.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){let n=this["_original_"+t]=this[t];this[t]=(...t)=>{let i=t[e],s=this.context.transport.schedule(i=>{t[e]=i,n.apply(this,t)},i);this._scheduledEvents.push(s)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,i){let s=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,s,i),this.triggerRelease(s+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class sC extends sk{constructor(){let t=n7(sC.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(sk.getDefaults(),{detune:0,onsilence:iy,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);let i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);let e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){let n=this.toSeconds(e),i=t instanceof iN?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){let t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}(0,n4.Cg)([sb(0)],sC.prototype,"portamento",void 0);class sA extends sw{constructor(){super(n7(sA.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new iz({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class sS extends sC{constructor(){let t=n7(sS.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new sv(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new sA(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),ig(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(sC.getDefaults(),{envelope:Object.assign(it(sw.getDefaults(),Object.keys(iB.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(it(sv.getDefaults(),[...Object.keys(sr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){let e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class sO extends iB{constructor(){let t=n7(sO.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ij({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new ij({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new ij({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new ij({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(iB.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){n$(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){let e=new Float32Array(t);for(let n=0;n<t;n++){let i=19980*Math.pow(n/t,2)+20;e[n]=i}let n=new Float32Array(t),i=new Float32Array(t),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(e,n,i),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class sM extends iB{constructor(){let t=n7(sM.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new iz({context:this.context}),this.output=new iz({context:this.context}),this._filters=[],this._filters=[],this.Q=new iX({context:this.context,units:"positive",value:t.Q}),this.frequency=new iX({context:this.context,units:"frequency",value:t.frequency}),this.detune=new iX({context:this.context,units:"cents",value:t.detune}),this.gain=new iX({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,ig(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(iB.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){n$(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(e=>e.type=t)}get rolloff(){return this._rolloff}set rolloff(t){let e=nz(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],i=n.indexOf(e);n$(-1!==i,`rolloff can only be ${n.join(", ")}`),i+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(t=>t.disconnect()),this._filters=Array(i);for(let t=0;t<i;t++){let e=new sO({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,iL(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){let e=new sO({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((t,e)=>n[e]*=t)}),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),iv(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class sI extends sS{constructor(){let t=n7(sI.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,ig(this,["oscillator","envelope"])}static getDefaults(){return n6(sC.getDefaults(),sS.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){let n=this.toSeconds(e),i=this.toFrequency(t instanceof iN?t.toFrequency():t),s=i*this.octaves;return this.oscillator.frequency.setValueAtTime(s,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,n4.Cg)([sy(0)],sI.prototype,"octaves",void 0),(0,n4.Cg)([sb(0)],sI.prototype,"pitchDecay",void 0);let sE=new Set;function sD(t,e){let n=`registerProcessor("${t}", ${e})`;sE.add(n)}l=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`,sE.add(l),u=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`,sE.add(u),h=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`,sE.add(h),sD("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class sR extends sk{constructor(){let t=n7(sR.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t),n$(!nz(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(sk.getDefaults(),{maxPolyphony:32,options:{},voice:sS})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);let e=this._activeVoices.findIndex(e=>e.voice===t);this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return n$(t instanceof sC,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}n2("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach(t=>{let i=new i8(this.context,t).toMidi(),s=this._getNextAvailableVoice();s&&(s.triggerAttack(t,e,n),this._activeVoices.push({midi:i,voice:s,released:!1}),this.log("triggerAttack",t,e))})}_triggerRelease(t,e){t.forEach(t=>{let n=new i8(this.context,t).toMidi(),i=this._activeVoices.find(({midi:t,released:e})=>t===n&&!e);i&&(i.voice.triggerRelease(e),i.released=!0,this.log("triggerRelease",t,e))})}_scheduleEvent(t,e,n,i){n$(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,i):this._triggerRelease(e,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,e,n,i)},n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);let i=this.toSeconds(e);return this._scheduleEvent("attack",t,i,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);let n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,i){let s=this.toSeconds(n);if(this.triggerAttack(t,s,i),nX(e)){n$(nX(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){let i=e[Math.min(n,e.length-1)],r=this.toSeconds(i);n$(r>0,"The duration must be greater than 0"),this.triggerRelease(t[n],s+r)}}else{let n=this.toSeconds(e);n$(n>0,"The duration must be greater than 0"),this.triggerRelease(t,s+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){let e=it(t,["onsilence","context"]);return this.options=n6(this.options,e),this._voices.forEach(t=>t.set(e)),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){let e=this.toSeconds(t);return this._activeVoices.forEach(({voice:t})=>{t.triggerRelease(e)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class sN extends sk{constructor(){let t=n7(sN.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;let e={};Object.keys(t.urls).forEach(n=>{let i=parseInt(n,10);n$(nZ(n)||nz(i)&&isFinite(i),`url key is neither a note or midi pitch: ${n}`),nZ(n)?e[new iN(this.context,n).toMidi()]=t.urls[n]:nz(i)&&isFinite(i)&&(e[i]=t.urls[i])}),this._buffers=new i2({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(sk.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:iy,onerror:iy,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{let i=iI(new iN(this.context,t).toFrequency()),s=Math.round(i),r=i-s,a=this._findClosest(s),o=s-a,l=this._buffers.get(o),u=iS(a+r),h=new sa({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);h.start(e,0,l.duration/u,n),nX(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){let t=this._activeSources.get(s),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{let n=new iN(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){let t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){let e=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){let s=this.toSeconds(n);return this.triggerAttack(t,s,i),nX(e)?(n$(nX(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{let i=e[Math.min(n,e.length-1)];this.triggerRelease(t,s+this.toSeconds(i))})):this.triggerRelease(t,s+this.toSeconds(e)),this}add(t,e,n){if(n$(nZ(t)||isFinite(t),`note must be a pitch or midi: ${t}`),nZ(t)){let i=new iN(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}(0,n4.Cg)([sb(0)],sN.prototype,"attack",void 0),(0,n4.Cg)([sb(0)],sN.prototype,"release",void 0);class sV extends iU{constructor(){let t=n7(sV.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new iF("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(iU.getDefaults(),{callback:iy,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);let n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||nz(this._loop)&&this._loop>1){e=1/0,nz(this._loop)&&(e=this._loop*this._getLoopDuration());let i=this._state.getAfter(n);null!==i&&(e=Math.min(e,i.time-n)),e!==1/0&&(e=new i3(this.context,e));let s=new i3(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),s,new i3(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new i3(this.context,n))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){let e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);let e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});let t=this._state.getBefore(e),n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=n9(t,-1/0);let e=this.toTicks(t);return this._state.forEachFrom(e,t=>{this.context.transport.clear(t.id)}),this._state.cancel(e),this}_tick(t){let e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;nG(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new i3(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new i3(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(!this._loop)return 0;{let t=this.context.transport.ticks,e=this._state.get(t);if(null===e||"started"!==e.state)return 0;{let n=this._getLoopDuration();return(t-e.time)%n/n}}}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class sP extends sV{constructor(){let t=n7(sP.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new iF("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach(t=>{nX(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(sV.getDefaults(),{events:[]})}start(t,e){let n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=n9(e,this._loop?this._loopStart:0),e=this._loop?n9(e,this._loopStart):n9(e,0);let t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach(e=>{this._startNote(e,n,t)})}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new i3(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new i3(this.context,e))):t.startOffset>=n&&t.start(new i3(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(t){let e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(e=>{e.stop(t)}),this}at(t,e){let n=new iq(this.context,t).toTicks(),i=new i3(this.context,1).toSeconds(),s=this._events.values(),r=s.next();for(;!r.done;){let t=r.value;if(Math.abs(n-t.startOffset)<i)return nW(e)&&(t.value=e),t;r=s.next()}return nW(e)?(this.add(t,e),this.at(t)):null}add(t,e){let n;t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);let i=this.toTicks(t);return e instanceof sV?(n=e).callback=this._tick.bind(this):n=new sV({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=i,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new i3(this.context,e.time))})}remove(t,e){return nH(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(n=>{n.startOffset===t&&(nL(e)||nW(e)&&n.value===e)&&(this._events.delete(n),n.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof sP?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(n=>{n[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new i3(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new i3(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class sq extends iB{constructor(){let t=n7(sq.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ij({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",ig(this,"pan")}static getDefaults(){return Object.assign(iB.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}sD("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class sU extends iB{constructor(){let t=n7(sU.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new iz({context:this.context}),sU._allSolos.has(this.context)||sU._allSolos.set(this.context,new Set),sU._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(iB.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),sU._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){sU._soloed.has(this.context)||sU._soloed.set(this.context,new Set),sU._soloed.get(this.context).add(this)}_removeSolo(){sU._soloed.has(this.context)&&sU._soloed.get(this.context).delete(this)}_isSoloed(){return sU._soloed.has(this.context)&&sU._soloed.get(this.context).has(this)}_noSolos(){return!sU._soloed.has(this.context)||sU._soloed.has(this.context)&&0===sU._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),sU._allSolos.get(this.context).delete(this),this._removeSolo(),this}}sU._allSolos=new Map,sU._soloed=new Map;class sF extends iB{constructor(){let t=n7(sF.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new sq({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new iK({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,ig(this,["pan","volume"])}static getDefaults(){return Object.assign(iB.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class sj extends iB{constructor(){let t=n7(sj.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new sU({solo:t.solo,context:this.context}),this._panVol=this.output=new sF({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ig(this,["pan","volume"])}static getDefaults(){return Object.assign(iB.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return sj.buses.has(t)||sj.buses.set(t,new iz({context:this.context})),sj.buses.get(t)}send(t,e=0){let n=this._getBus(t),i=new iz({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}function sB(){return ik().transport}sj.buses=new Map,ik().transport,ik().destination,ik().destination,ik().listener,ik().draw,ik()},32436:(t,e,n)=>{"use strict";function i(t){var e=[];return function t(e,n){for(var i=0;i<e.length;i++){var s=e[i];Array.isArray(s)?t(s,n):n.push(s)}}(t,e),e}n.r(e),n.d(e,{flatten:()=>i})},33998:(t,e,n)=>{"use strict";n.d(e,{Slider:()=>E});var i=n(95155),s=n(12115),r=n(31416),a=n(41030),o=n(91128),l=n(11286),u=n(28428),h=n(49957),c=n(3439),p=n(80533),d=n(26225),f=n(23653),m=n(39398),g=n(91853),v=n(66645),y=n(25063),b=n(21490),x=n(22182),w=n(72476),T=n(96456),k=n(94999),C=n(36266),A=n(50360),S=n(99364),O=n(77111);let M={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},thumbLabel:"",showLabelOnHover:!0,scale:t=>t,size:"md"},I=(0,p.createVarsResolver)((t,e)=>{let{size:n,color:i,thumbSize:s,radius:r}=e;return{root:{"--slider-size":(0,h.getSize)(n,"slider-size"),"--slider-color":i?(0,d.getThemeColor)(i,t):void 0,"--slider-radius":void 0===r?void 0:(0,h.getRadius)(r),"--slider-thumb-size":void 0!==s?(0,u.D)(s):"calc(var(--slider-size) * 2)"}}}),E=(0,g.factory)((t,e)=>{let n=(0,f.useProps)("Slider",M,t),{classNames:u,styles:h,value:p,onChange:d,onChangeEnd:g,size:E,min:D,max:R,domain:N,step:V,precision:P,defaultValue:q,name:U,marks:F,label:j,labelTransitionProps:B,labelAlwaysOn:L,thumbLabel:W,showLabelOnHover:z,thumbChildren:H,disabled:G,unstyled:X,scale:Y,inverted:Z,className:$,style:Q,vars:J,hiddenInputProps:K,restrictToMarks:tt,thumbProps:te,attributes:tn,...ti}=n,ts=(0,m.useStyles)({name:"Slider",props:n,classes:O.A,classNames:u,className:$,styles:h,style:Q,attributes:tn,vars:J,varsResolver:I,unstyled:X}),{dir:tr}=(0,v.useDirection)(),[ta,to]=(0,s.useState)(!1),[tl,tu]=(0,r.useUncontrolled)({value:"number"==typeof p?(0,a.clamp)(p,D,R):p,defaultValue:"number"==typeof q?(0,a.clamp)(q,D,R):q,finalValue:(0,a.clamp)(0,D,R),onChange:d}),th=(0,s.useRef)(tl),tc=(0,s.useRef)(g);(0,s.useEffect)(()=>{tc.current=g},[g]);let tp=(0,s.useRef)(null),td=(0,s.useRef)(null),[tf,tm]=N||[D,R],t_=(0,C.E)({value:tl,min:tf,max:tm}),tg=Y(tl),tv="function"==typeof j?j(tg):j,ty=null!=P?P:(0,A.X)(V),tb=(0,s.useCallback)(t=>{let{x:e}=t;if(!G){let t=(0,T.c)({value:e,min:tf,max:tm,step:V,precision:ty}),n=(0,a.clamp)(t,D,R);tu(tt&&(null==F?void 0:F.length)?(0,c.findClosestNumber)(n,F.map(t=>t.value)):n),th.current=n}},[G,D,R,tf,tm,V,ty,tu,F,tt]),tx=(0,s.useCallback)(()=>{if(!G&&tc.current){let t=tt&&(null==F?void 0:F.length)?(0,c.findClosestNumber)(th.current,F.map(t=>t.value)):th.current;tc.current(t)}},[G,F,tt]),{ref:tw,active:tT}=(0,o.useMove)(tb,{onScrubEnd:tx},tr),tk=(0,s.useCallback)(t=>{!G&&tc.current&&tc.current(t)},[G]);return(0,i.jsx)(y.h,{value:{getStyles:ts},children:(0,i.jsxs)(b.g,{...ti,ref:(0,l.useMergedRef)(e,tp),onKeyDownCapture:t=>{if(!G){var e,n,i,s,r,a;switch(t.key){case"ArrowUp":{if(t.preventDefault(),null==(e=td.current)||e.focus(),tt&&F){let t=(0,S.C8)(tl,F);tu(t),tk(t);break}let n=(0,k.q)(Math.min(Math.max(tl+V,D),R),ty);tu(n),tk(n);break}case"ArrowRight":{if(t.preventDefault(),null==(n=td.current)||n.focus(),tt&&F){let t="rtl"===tr?(0,S.Mh)(tl,F):(0,S.C8)(tl,F);tu(t),tk(t);break}let e=(0,k.q)(Math.min(Math.max("rtl"===tr?tl-V:tl+V,D),R),ty);tu(e),tk(e);break}case"ArrowDown":{if(t.preventDefault(),null==(i=td.current)||i.focus(),tt&&F){let t=(0,S.Mh)(tl,F);tu(t),tk(t);break}let e=(0,k.q)(Math.min(Math.max(tl-V,D),R),ty);tu(e),tk(e);break}case"ArrowLeft":{if(t.preventDefault(),null==(s=td.current)||s.focus(),tt&&F){let t="rtl"===tr?(0,S.C8)(tl,F):(0,S.Mh)(tl,F);tu(t),tk(t);break}let e=(0,k.q)(Math.min(Math.max("rtl"===tr?tl+V:tl-V,D),R),ty);tu(e),tk(e);break}case"Home":if(t.preventDefault(),null==(r=td.current)||r.focus(),tt&&F){tu((0,S.HE)(F)),tk((0,S.HE)(F));break}tu(D),tk(D);break;case"End":if(t.preventDefault(),null==(a=td.current)||a.focus(),tt&&F){tu((0,S.rq)(F)),tk((0,S.rq)(F));break}tu(R),tk(R)}}},onMouseDownCapture:()=>{var t;return null==(t=tp.current)?void 0:t.focus()},size:E,disabled:G,children:[(0,i.jsx)(w.C,{inverted:Z,offset:0,filled:t_,marks:F,min:tf,max:tm,value:tg,disabled:G,containerProps:{ref:tw,onMouseEnter:z?()=>to(!0):void 0,onMouseLeave:z?()=>to(!1):void 0},children:(0,i.jsx)(x.z,{max:tm,min:tf,value:tg,position:t_,dragging:tT,label:tv,ref:td,labelTransitionProps:B,labelAlwaysOn:L,thumbLabel:W,showLabelOnHover:z,isHovered:ta,disabled:G,...te,children:H})}),(0,i.jsx)("input",{type:"hidden",name:U,value:tg,...K})]})})});E.classes=O.A,E.displayName="@mantine/core/Slider"},35130:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},35877:(t,e,n)=>{e.parseMidi=n(72858),e.writeMidi=n(12362)},36266:(t,e,n)=>{"use strict";function i(t){let{value:e,min:n,max:i}=t;return Math.min(Math.max((e-n)/(i-n)*100,0),100)}n.d(e,{E:()=>i})},37081:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,s,r,a,o=[],l=!0,u=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(t){u=!0,s=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw s}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},37271:(t,e,n)=>{var i=n(93826);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},37354:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]])},40045:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e,n){if(n||2==arguments.length)for(var i,s=0,r=e.length;s<r;s++)!i&&s in e||(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var s=n(35877),r=n(71142),a=n(32436);e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:i([i(i(i(i([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(t){var e;return e=r.keySignatureKeys.indexOf(t.key),{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:+("major"!==t.scale),type:"keySignature"}}),!0),t.header.meta.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}),!0),t.header.tempos.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}),!0),t.header.timeSignatures.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}),!0)],t.tracks.map(function(t){var e;return i(i(i([{absoluteTime:0,deltaTime:0,meta:!0,text:t.name,type:"trackName"},{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}],(0,a.flatten)(t.notes.map(function(e){var n;return n=t.channel,[{absoluteTime:e.ticks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(127*e.velocity)},{absoluteTime:e.ticks+e.durationTicks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(127*e.noteOffVelocity)}]})),!0),function(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(n){var i;e.push((i=t.channel,{absoluteTime:n.ticks,channel:i,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(127*n.value)}))});return e}(t),!0),(e=[],t.pitchBends.forEach(function(n){var i;e.push((i=t.channel,{absoluteTime:n.ticks,channel:i,deltaTime:0,type:"pitchBend",value:n.value}))}),e),!0)}),!0)};return e.tracks=e.tracks.map(function(t){t=t.sort(function(t,e){return t.absoluteTime-e.absoluteTime});var e=0;return t.forEach(function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array((0,s.writeMidi)(e))}},41030:(t,e,n)=>{"use strict";function i(t,e,n){return void 0===e&&void 0===n?t:void 0!==e&&void 0===n?Math.max(t,e):void 0===e&&void 0!==n?Math.min(t,n):Math.min(Math.max(t,e),n)}n.d(e,{clamp:()=>i})},48358:(t,e,n)=>{var i=n(26894),s=n(37081),r=n(37271),a=n(253);t.exports=function(t,e){return i(t)||s(t,e)||r(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},49642:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("repeat-1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]])},49989:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrumKitByPatchID=e.InstrumentFamilyByID=e.instrumentByPatchID=void 0,e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},50360:(t,e,n)=>{"use strict";function i(t){if(!t)return 0;let e=t.toString().split(".");return e.length>1?e[1].length:0}n.d(e,{X:()=>i})},50954:t=>{t.exports=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},53511:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},53927:(t,e)=>{"use strict";function n(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var i=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var i=t.exec(n),s=i[1],r=i[2];return e[s.toLowerCase()]+(parseInt(r,10)+1)*12}}(),s=new WeakMap;e.Note=function(){function t(t,e,n){s.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){var t,e;return e=Math.floor((t=this.midi)/12)-1,n(t)+e.toString()},set:function(t){this.midi=i(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return n(this.midi)},set:function(t){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=s.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return s.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){return s.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}()},55418:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i=n(21110),s=n(2852),r=n(24633),a=n(93376),o=n(1990),l=n(53927),u=new WeakMap;e.Track=function(){function t(t,e){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,r.createControlChanges)(),this.pitchBends=[],u.set(this,e),t){var i=t.find(function(t){return"trackName"===t.type});this.name=i?i.text:""}if(this.instrument=new o.Instrument(t,this),this.channel=0,t){for(var s=t.filter(function(t){return"noteOn"===t.type}),a=t.filter(function(t){return"noteOff"===t.type}),l=this;s.length;)!function(){var t=s.shift();l.channel=t.channel;var e=a.findIndex(function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime});if(-1!==e){var n=a.splice(e,1)[0];l.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}}();t.filter(function(t){return"controller"===t.type}).forEach(function(t){n.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})}),t.filter(function(t){return"pitchBend"===t.type}).forEach(function(t){n.addPitchBend({ticks:t.absoluteTime,value:t.value/8192})});var h=t.find(function(t){return"endOfTrack"===t.type});this.endOfTrackTicks=void 0!==h?h.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=u.get(this),n=new l.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(n,t),(0,i.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(t){var e=u.get(this),n=new s.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,i.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(t){var e=u.get(this),n=new a.PitchBend({},e);return Object.assign(n,t),(0,i.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new o.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})});t.notes.forEach(function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})})},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(t){return t.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(t){return t.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(t){return t.toJSON()})};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}()},58380:(t,e,n)=>{"use strict";n.d(e,{ActionIcon:()=>v});var i=n(95155);n(12115);var s=n(49957),r=n(80533),a=n(23653),o=n(39398),l=n(67623),u=n(24454),h=n(63090),c=n(63652),p=n(73643),d=n(17764),f=n(23924),m=n(3259);let g=(0,r.createVarsResolver)((t,e)=>{let{size:n,radius:i,variant:r,gradient:a,color:o,autoContrast:l}=e,u=t.variantColorResolver({color:o||t.primaryColor,theme:t,gradient:a,variant:r||"filled",autoContrast:l});return{root:{"--ai-size":(0,s.getSize)(n,"ai-size"),"--ai-radius":void 0===i?void 0:(0,s.getRadius)(i),"--ai-bg":o||r?u.background:void 0,"--ai-hover":o||r?u.hover:void 0,"--ai-hover-color":o||r?u.hoverColor:void 0,"--ai-color":u.color,"--ai-bd":o||r?u.border:void 0}}}),v=(0,u.polymorphicFactory)((t,e)=>{let n=(0,a.useProps)("ActionIcon",null,t),{className:s,unstyled:r,variant:u,classNames:d,styles:f,style:v,loading:y,loaderProps:b,size:x,color:w,radius:T,__staticSelector:k,gradient:C,vars:A,children:S,disabled:O,"data-disabled":M,autoContrast:I,mod:E,attributes:D,...R}=n,N=(0,o.useStyles)({name:["ActionIcon",k],props:n,className:s,style:v,classes:m.A,classNames:d,styles:f,unstyled:r,attributes:D,vars:A,varsResolver:g});return(0,i.jsxs)(p.UnstyledButton,{...N("root",{active:!O&&!y&&!M}),...R,unstyled:r,variant:u,size:x,disabled:O||y,ref:e,mod:[{loading:y,disabled:O||M},E],children:["boolean"==typeof y&&(0,i.jsx)(c.Transition,{mounted:y,transition:"slide-down",duration:150,children:t=>(0,i.jsx)(l.Box,{component:"span",...N("loader",{style:t}),"aria-hidden":!0,children:(0,i.jsx)(h.Loader,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...b})})}),(0,i.jsx)(l.Box,{component:"span",mod:{loading:y},...N("icon"),children:S})]})});v.classes=m.A,v.displayName="@mantine/core/ActionIcon",v.Group=d.ActionIconGroup,v.GroupSection=f.ActionIconGroupSection},65970:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,o)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){var l=[r,o];if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(s=2&l[0]?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){a.label=l[1];break}if(6===l[0]&&a.label<s[1]){a.label=s[1],s=l;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(l);break}s[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],i=0}finally{n=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var r=n(35877),a=n(71142),o=n(55418),l=n(40045);e.Midi=function(){function t(t){var e=this,n=null;if(t){var i=t instanceof ArrayBuffer?new Uint8Array(t):t;(n=(0,r.parseMidi)(i)).tracks.forEach(function(t){var e=0;t.forEach(function(t){e+=t.deltaTime,t.absoluteTime=e})}),n.tracks=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=e.length,s=new Map,r=Array(16).fill(0),a=0,o=t[n];a<o.length;a++){var l=o[a],u=i,h=l.channel;if(void 0!==h){"programChange"===l.type&&(r[h]=l.programNumber);var c=r[h],p="".concat(c," ").concat(h);s.has(p)?u=s.get(p):(u=i+s.size,s.set(p,u))}e[u]||e.push([]),e[u].push(l)}return e}(n.tracks)}this.header=new a.Header(n),this.tracks=[],t&&(this.tracks=n.tracks.map(function(t){return new o.Track(t,e.header)}),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return i(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,fetch(e)];case 1:if(!(n=i.sent()).ok)return[3,3];return[4,n.arrayBuffer()];case 2:return[2,new t(i.sent())];case 3:throw Error("Could not load '".concat(e,"'"))}})})},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var t=this.tracks.map(function(t){return t.durationTicks});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(){var t=new o.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return(0,l.encode)(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(t){return t.toJSON()})}},t.prototype.fromJSON=function(t){var e=this;this.header=new a.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map(function(t){var n=new o.Track(void 0,e.header);return n.fromJSON(t),n})},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();var u=n(55418);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return u.Track}});var h=n(71142);Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return h.Header}})},71142:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var i=n(21110),s=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var r=function(){function t(t){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",s.set(this,480),t){s.set(this,t.header.ticksPerBeat),t.tracks.forEach(function(t){t.forEach(function(t){t.meta&&("timeSignature"===t.type?n.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?n.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&n.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))})});var i=0;t.tracks[0].forEach(function(t){i+=t.deltaTime,t.meta&&("trackName"===t.type?n.name=t.text:("text"===t.type||"cuePoint"===t.type||"marker"===t.type||"lyrics"===t.type)&&n.meta.push({text:t.text,ticks:i,type:t.type}))}),this.update()}}return t.prototype.update=function(){var t=this,e=0,n=0;this.tempos.sort(function(t,e){return t.ticks-e.ticks}),this.tempos.forEach(function(i,s){var r=s>0?t.tempos[s-1].bpm:t.tempos[0].bpm,a=i.ticks/t.ppq-n;i.time=60/r*a+e,e=i.time,n+=a}),this.timeSignatures.sort(function(t,e){return t.ticks-e.ticks}),this.timeSignatures.forEach(function(e,n){var i=n>0?t.timeSignatures[n-1]:t.timeSignatures[0],s=(e.ticks-i.ticks)/t.ppq/i.timeSignature[0]/(i.timeSignature[1]/4);i.measures=i.measures||0,e.measures=s+i.measures})},t.prototype.ticksToSeconds=function(t){var e=(0,i.search)(this.tempos,t);if(-1===e)return .5*(t/this.ppq);var n=this.tempos[e],s=n.time,r=(t-n.ticks)/this.ppq;return s+60/n.bpm*r},t.prototype.ticksToMeasures=function(t){var e=(0,i.search)(this.timeSignatures,t);if(-1===e)return t/this.ppq/4;var n=this.timeSignatures[e],s=(t-n.ticks)/this.ppq;return n.measures+s/(n.timeSignature[0]/n.timeSignature[1])/4},Object.defineProperty(t.prototype,"ppq",{get:function(){return s.get(this)},enumerable:!1,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=(0,i.search)(this.tempos,t,"time");if(-1===e)return Math.round(t/.5*this.ppq);var n=this.tempos[e],s=(t-n.time)/(60/n.bpm);return Math.round(n.ticks+s*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(t){return{bpm:t.bpm,ticks:t.ticks}}),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map(function(t){return Object.assign({},t)}),this.timeSignatures=t.timeSignatures.map(function(t){return Object.assign({},t)}),this.keySignatures=t.keySignatures.map(function(t){return Object.assign({},t)}),this.meta=t.meta.map(function(t){return Object.assign({},t)}),s.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=r},72476:(t,e,n)=>{"use strict";n.d(e,{C:()=>u});var i=n(95155),s=n(12115),r=n(67623),a=n(25063),o=n(36266);function l(t){let{marks:e,min:n,max:l,disabled:u,value:h,offset:c,inverted:p}=t,{getStyles:d}=(0,a.s)();if(!e)return null;let f=e.map((t,e)=>(0,s.createElement)(r.Box,{...d("markWrapper"),__vars:{"--mark-offset":"".concat((0,o.E)({value:t.value,min:n,max:l}),"%")},key:e},(0,i.jsx)(r.Box,{...d("mark"),mod:{filled:function(t){let{mark:e,offset:n,value:i,inverted:s=!1}=t;return s?"number"==typeof n&&e.value<=n||e.value>=i:"number"==typeof n?e.value>=n&&e.value<=i:e.value<=i}({mark:t,value:h,offset:c,inverted:p}),disabled:u}}),t.label&&(0,i.jsx)("div",{...d("markLabel"),children:t.label})));return(0,i.jsx)("div",{children:f})}function u(t){let{filled:e,children:n,offset:s,disabled:o,marksOffset:u,inverted:h,containerProps:c,...p}=t,{getStyles:d}=(0,a.s)();return(0,i.jsx)(r.Box,{...d("trackContainer"),mod:{disabled:o},...c,children:(0,i.jsxs)(r.Box,{...d("track"),mod:{inverted:h,disabled:o},children:[(0,i.jsx)(r.Box,{mod:{inverted:h,disabled:o},__vars:{"--slider-bar-width":"calc(".concat(e,"% + 2 * var(--slider-size))"),"--slider-bar-offset":"calc(".concat(s,"% - var(--slider-size))")},...d("bar")}),n,(0,i.jsx)(l,{...p,offset:u,disabled:o,inverted:h})]})})}l.displayName="@mantine/core/SliderMarks",u.displayName="@mantine/core/SliderTrack"},72858:t=>{function e(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}e.prototype.eof=function(){return this.pos>=this.bufferLen},e.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},e.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},e.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},e.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-0x1000000:t},e.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},e.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},e.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},e.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}},t.exports=function(t){var n,i,s,r=new e(t),a=r.readChunk();if("MThd"!=a.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+a.id+"'";for(var o=(i={format:(n=new e(a.data)).readUInt16(),numTracks:n.readUInt16()},32768&(s=n.readUInt16())?(i.framesPerSecond=256-(s>>8),i.ticksPerFrame=255&s):i.ticksPerBeat=s,i),l=[],u=0;!r.eof()&&u<o.numTracks;u++){var h=r.readChunk();if("MTrk"!=h.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+h.id+"'";var c=function(t){for(var n,i=new e(t),s=[];!i.eof();){var r=function(){var t={};t.deltaTime=i.readVarInt();var e=i.readUInt8();if((240&e)==240)if(255===e){t.meta=!0;var s=i.readUInt8(),r=i.readVarInt();switch(s){case 0:if(t.type="sequenceNumber",2!==r)throw"Expected length for sequenceNumber event is 2, got "+r;return t.number=i.readUInt16(),t;case 1:return t.type="text",t.text=i.readString(r),t;case 2:return t.type="copyrightNotice",t.text=i.readString(r),t;case 3:return t.type="trackName",t.text=i.readString(r),t;case 4:return t.type="instrumentName",t.text=i.readString(r),t;case 5:return t.type="lyrics",t.text=i.readString(r),t;case 6:return t.type="marker",t.text=i.readString(r),t;case 7:return t.type="cuePoint",t.text=i.readString(r),t;case 32:if(t.type="channelPrefix",1!=r)throw"Expected length for channelPrefix event is 1, got "+r;return t.channel=i.readUInt8(),t;case 33:if(t.type="portPrefix",1!=r)throw"Expected length for portPrefix event is 1, got "+r;return t.port=i.readUInt8(),t;case 47:if(t.type="endOfTrack",0!=r)throw"Expected length for endOfTrack event is 0, got "+r;return t;case 81:if(t.type="setTempo",3!=r)throw"Expected length for setTempo event is 3, got "+r;return t.microsecondsPerBeat=i.readUInt24(),t;case 84:if(t.type="smpteOffset",5!=r)throw"Expected length for smpteOffset event is 5, got "+r;var a=i.readUInt8();return t.frameRate=({0:24,32:25,64:29,96:30})[96&a],t.hour=31&a,t.min=i.readUInt8(),t.sec=i.readUInt8(),t.frame=i.readUInt8(),t.subFrame=i.readUInt8(),t;case 88:if(t.type="timeSignature",2!=r&&4!=r)throw"Expected length for timeSignature event is 4 or 2, got "+r;return t.numerator=i.readUInt8(),t.denominator=1<<i.readUInt8(),4===r?(t.metronome=i.readUInt8(),t.thirtyseconds=i.readUInt8()):(t.metronome=36,t.thirtyseconds=8),t;case 89:if(t.type="keySignature",2!=r)throw"Expected length for keySignature event is 2, got "+r;return t.key=i.readInt8(),t.scale=i.readUInt8(),t;case 127:return t.type="sequencerSpecific",t.data=i.readBytes(r),t;default:return t.type="unknownMeta",t.data=i.readBytes(r),t.metatypeByte=s,t}}else if(240==e){t.type="sysEx";var r=i.readVarInt();return t.data=i.readBytes(r),t}else if(247==e){t.type="endSysEx";var r=i.readVarInt();return t.data=i.readBytes(r),t}else throw"Unrecognised MIDI event type byte: "+e;if((128&e)==0){if(null===n)throw"Running status byte encountered before status byte";o=e,e=n,t.running=!0}else o=i.readUInt8(),n=e;var o,l=e>>4;switch(t.channel=15&e,l){case 8:return t.type="noteOff",t.noteNumber=o,t.velocity=i.readUInt8(),t;case 9:var u=i.readUInt8();return t.type=0===u?"noteOff":"noteOn",t.noteNumber=o,t.velocity=u,0===u&&(t.byte9=!0),t;case 10:return t.type="noteAftertouch",t.noteNumber=o,t.amount=i.readUInt8(),t;case 11:return t.type="controller",t.controllerType=o,t.value=i.readUInt8(),t;case 12:return t.type="programChange",t.programNumber=o,t;case 13:return t.type="channelAftertouch",t.amount=o,t;case 14:return t.type="pitchBend",t.value=o+(i.readUInt8()<<7)-8192,t;default:throw"Unrecognised MIDI event type: "+l}}();s.push(r)}return s}(h.data);l.push(c)}return{header:o,tracks:l}}},76168:(t,e,n)=>{var i=n(92639).default;t.exports=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=i(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},77111:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var i={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"}},77247:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]])},80003:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},80797:(t,e,n)=>{var i=n(92639).default,s=n(76168);t.exports=function(t){var e=s(t,"string");return"symbol"==i(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},85921:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},89652:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},90088:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]])},91128:(t,e,n)=>{"use strict";n.d(e,{clampUseMovePosition:()=>r,useMove:()=>a});var i=n(12115),s=n(41030);function r(t){return{x:(0,s.clamp)(t.x,0,1),y:(0,s.clamp)(t.y,0,1)}}function a(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr",r=(0,i.useRef)(!1),a=(0,i.useRef)(!1),o=(0,i.useRef)(0),[l,u]=(0,i.useState)(!1),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{r.current=!0},[]),{ref:(0,i.useCallback)(i=>{if(h.current&&(h.current(),h.current=null),!i)return;let l=e=>{let{x:a,y:l}=e;cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(r.current&&i){i.style.userSelect="none";let e=i.getBoundingClientRect();if(e.width&&e.height){let i=(0,s.clamp)((a-e.left)/e.width,0,1);t({x:"ltr"===n?i:1-i,y:(0,s.clamp)((l-e.top)/e.height,0,1)})}}})},c=()=>{!a.current&&r.current&&(a.current=!0,"function"==typeof(null==e?void 0:e.onScrubStart)&&e.onScrubStart(),u(!0),document.addEventListener("mousemove",f),document.addEventListener("mouseup",p),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",p))},p=()=>{a.current&&r.current&&(a.current=!1,u(!1),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",p),setTimeout(()=>{"function"==typeof(null==e?void 0:e.onScrubEnd)&&e.onScrubEnd()},0))},d=t=>{c(),t.preventDefault(),f(t)},f=t=>l({x:t.clientX,y:t.clientY}),m=t=>{t.cancelable&&t.preventDefault(),c(),g(t)},g=t=>{t.cancelable&&t.preventDefault(),l({x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY})};i.addEventListener("mousedown",d),i.addEventListener("touchstart",m,{passive:!1}),h.current=()=>{i.removeEventListener("mousedown",d),i.removeEventListener("touchstart",m)}},[n,t]),active:l}}},92639:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},93376:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PitchBend=void 0;var n=new WeakMap;e.PitchBend=function(){function t(t,e){n.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}()},93826:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},94999:(t,e,n)=>{"use strict";function i(t,e){return parseFloat(t.toFixed(e))}n.d(e,{q:()=>i})},96456:(t,e,n)=>{"use strict";function i(t){let{value:e,containerWidth:n,min:i,max:s,step:r,precision:a}=t,o=(n?Math.min(Math.max(e,0),n)/n:e)*(s-i),l=Math.max((0!==o?Math.round(o/r)*r:0)+i,i);return void 0!==a?Number(l.toFixed(a)):l}n.d(e,{c:()=>i})},97624:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]])},99364:(t,e,n)=>{"use strict";function i(t,e){let n=[...e].sort((t,e)=>t.value-e.value).find(e=>e.value>t);return n?n.value:t}function s(t,e){let n=[...e].sort((t,e)=>e.value-t.value).find(e=>e.value<t);return n?n.value:t}function r(t){let e=[...t].sort((t,e)=>t.value-e.value);return e.length>0?e[0].value:0}function a(t){let e=[...t].sort((t,e)=>t.value-e.value);return e.length>0?e[e.length-1].value:100}n.d(e,{C8:()=>i,HE:()=>r,Mh:()=>s,rq:()=>a})},99975:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});let i=(0,n(71847).A)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]])}}]);