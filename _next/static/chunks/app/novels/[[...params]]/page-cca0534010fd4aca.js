(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{52452:(e,t,r)=>{"use strict";r.d(t,{default:()=>L});var s=r(95155),n=r(12115),l=r(59318),i=r(97866),o=r(52619),a=r.n(o),c=r(37621),d=r(2369),x=r(82726),h=r(67661),m=r(67623),u=r(94621),p=r(13877),j=r(74264),g=r(70305),f=r(77147),b=r(40387),y=r(63090),v=r(12007),w=r(96778),z=r(52987),S=r(35626),T=r(26203);function _(){return(0,s.jsx)(d.Stack,{gap:"md","aria-label":"소설 목록 로딩","aria-busy":"true",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)(x.Paper,{p:"lg",withBorder:!0,children:(0,s.jsx)(h.Group,{justify:"space-between",align:"flex-start",gap:"lg",children:(0,s.jsxs)(m.Box,{style:{flex:1,minWidth:0},children:[(0,s.jsx)(u.Skeleton,{height:24,width:"70%",radius:"sm",mb:"sm"}),(0,s.jsx)(u.Skeleton,{height:16,width:"100%",radius:"sm"})]})})},t))})}function C(){let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[i,o]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{try{l(!0);let e=await c._H.list({limit:50,status:"ongoing"}),r=await c._H.list({limit:50,status:"completed"}),s=[];e.novels&&(s=[...s,...e.novels]),r.novels&&(s=[...s,...r.novels]);let n=Array.from(new Map(s.filter(e=>"draft"!==e.status).map(e=>[e.slug,e])).values());t(n),o("")}catch(e){o(e instanceof Error?e.message:"소설을 불러오지 못했습니다"),t([])}finally{l(!1)}})()},[]),(0,s.jsx)(m.Box,{mih:"100vh",py:"xl",children:(0,s.jsx)(p.Container,{size:"sm",children:(0,s.jsxs)(d.Stack,{gap:"xl",children:[(0,s.jsxs)(m.Box,{pb:"xl",style:{borderBottom:"1px solid var(--color-border)"},children:[(0,s.jsx)(T.oq,{href:"/"}),(0,s.jsx)(j.Title,{order:1,fw:400,size:"h2",mb:"sm",children:"소설"}),e.length>0&&(0,s.jsxs)(g.Text,{size:"xs",c:"dimmed",children:["총 ",e.length,"개"]})]}),i&&(0,s.jsx)(x.Paper,{withBorder:!0,p:"md",children:(0,s.jsx)(g.Text,{size:"sm",children:i})}),r&&(0,s.jsx)(_,{}),!r&&e.length>0&&(0,s.jsx)(d.Stack,{gap:"md",children:e.map(e=>(0,s.jsx)(f.Anchor,{component:a(),href:"/novels/".concat(e.slug),underline:"never",style:{width:"100%",textAlign:"left"},children:(0,s.jsx)(x.Paper,{p:"lg",withBorder:!0,style:{borderColor:"var(--color-border)",backgroundColor:"transparent",cursor:"pointer",transition:"all 0.15s ease-in-out"},onMouseEnter:e=>{let t=e.currentTarget;t.style.borderColor="var(--color-text-primary)",t.style.backgroundColor="var(--color-foreground)"},onMouseLeave:e=>{let t=e.currentTarget;t.style.borderColor="var(--color-border)",t.style.backgroundColor="transparent"},children:(0,s.jsxs)(h.Group,{justify:"space-between",align:"flex-start",gap:"md",children:[(0,s.jsxs)(m.Box,{style:{flex:1,minWidth:0},children:[(0,s.jsx)(j.Title,{order:2,size:"h4",fw:500,mb:"xs",children:e.title}),e.description&&(0,s.jsx)(g.Text,{size:"sm",c:"dimmed",lineClamp:2,children:e.description}),(0,s.jsxs)(h.Group,{gap:"sm",mt:"sm",children:[(0,s.jsx)(g.Text,{size:"xs",c:"dimmed",children:"ongoing"===e.status?"연재 중":"completed"===e.status?"완결":e.status}),e.genre&&(0,s.jsx)(g.Text,{size:"xs",c:"dimmed",children:e.genre})]})]}),(0,s.jsx)(z.A,{size:16,style:{flexShrink:0}})]})})},e.id))}),!r&&0===e.length&&!i&&(0,s.jsx)(b.Center,{py:"xl",children:(0,s.jsx)(g.Text,{c:"dimmed",children:"등록된 소설이 없습니다"})})]})})})}function k(e){let{slug:t}=e,[r,l]=(0,n.useState)(null),[i,o]=(0,n.useState)([]),[x,u]=(0,n.useState)(!0),[v,w]=(0,n.useState)("");return((0,n.useEffect)(()=>{(async()=>{try{u(!0);let e=await c._H.getBySlug(t),r=await c._H.getChapters(t);l(e),o(r||[]),w("")}catch(e){w(e instanceof Error?e.message:"소설을 불러오지 못했습니다")}finally{u(!1)}})()},[t]),x)?(0,s.jsx)(b.Center,{mih:"100vh",children:(0,s.jsx)(y.Loader,{})}):v||!r?(0,s.jsx)(p.Container,{size:"sm",py:"xl",mih:"100vh",children:(0,s.jsxs)(d.Stack,{gap:"md",children:[(0,s.jsx)(T.oq,{href:"/novels"}),(0,s.jsx)(g.Text,{c:"red",children:v||"소설을 찾을 수 없습니다"})]})}):(0,s.jsx)(p.Container,{size:"sm",py:"xl",mih:"100vh",children:(0,s.jsxs)(d.Stack,{gap:"xl",children:[(0,s.jsx)(T.oq,{href:"/novels"}),(0,s.jsxs)(m.Box,{pb:"xl",style:{borderBottom:"1px solid var(--color-border)"},children:[(0,s.jsxs)(h.Group,{gap:"xs",mb:"md",children:[(0,s.jsx)(g.Text,{size:"xs",fw:500,children:(e=>{switch(e){case"draft":return"작성 중";case"ongoing":return"연재 중";case"completed":return"완결";default:return e}})(r.status)}),r.genre&&(0,s.jsx)(g.Text,{size:"xs",fw:500,children:r.genre}),r.novel_type&&(0,s.jsx)(g.Text,{size:"xs",fw:500,children:"series"===r.novel_type?"연재물":"long"===r.novel_type?"장편":"단편"})]}),(0,s.jsx)(j.Title,{order:1,fw:400,size:"h2",mb:"md",children:r.title}),r.description&&(0,s.jsx)(g.Text,{size:"md",c:"dimmed",mb:"md",children:r.description}),i.length>0&&(0,s.jsxs)(g.Text,{size:"xs",c:"dimmed",children:[i.length,"개의 장"]})]}),i.length>0&&(0,s.jsxs)(d.Stack,{gap:"xs",children:[(0,s.jsx)(g.Text,{fw:500,size:"sm",children:"목차"}),i.map(e=>(0,s.jsx)(f.Anchor,{component:a(),href:"/novels/".concat(t,"/").concat(e.chapter_number),underline:"never",children:(0,s.jsx)(m.Box,{p:"md",style:{borderLeft:"1px solid var(--color-border)",paddingLeft:"1rem",cursor:"pointer",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{let t=e.currentTarget;t.style.borderLeftColor="var(--color-text-primary)",t.style.paddingLeft="1.25rem"},onMouseLeave:e=>{let t=e.currentTarget;t.style.borderLeftColor="var(--color-border)",t.style.paddingLeft="1rem"},children:(0,s.jsxs)(h.Group,{justify:"space-between",align:"center",children:[(0,s.jsxs)(m.Box,{children:[(0,s.jsx)(g.Text,{fw:500,size:"sm",children:e.title||"".concat(e.chapter_number,"장")}),e.published_at&&(0,s.jsx)(g.Text,{size:"xs",c:"dimmed",children:new Date(e.published_at).toLocaleDateString("ko-KR")})]}),(0,s.jsx)(z.A,{size:16})]})})},e.id))]}),0===i.length&&(0,s.jsx)(b.Center,{py:"xl",children:(0,s.jsx)(g.Text,{c:"dimmed",children:"등록된 장이 없습니다"})})]})})}function B(e){let{slug:t,chapterNumber:r}=e,[o,x]=(0,n.useState)(null),[u,f]=(0,n.useState)(null),[_,C]=(0,n.useState)([]),[k,B]=(0,n.useState)(!0),[L,E]=(0,n.useState)("");if((0,n.useEffect)(()=>{(async()=>{try{B(!0);let e=await c._H.getBySlug(t),s=await c._H.getChapter(t,r),n=await c._H.getChapters(t);x(e),f(s),C(n||[]),E("")}catch(e){E(e instanceof Error?e.message:"챕터를 불러오지 못했습니다")}finally{B(!1)}})()},[t,r]),k)return(0,s.jsx)(b.Center,{mih:"100vh",children:(0,s.jsx)(y.Loader,{})});if(L||!o||!u)return(0,s.jsx)(p.Container,{size:"sm",py:"xl",mih:"100vh",children:(0,s.jsxs)(d.Stack,{gap:"md",children:[(0,s.jsx)(T.oq,{href:"/novels/".concat(t)}),(0,s.jsx)(g.Text,{c:"red",children:L||"챕터를 찾을 수 없습니다"})]})});let A=_.findIndex(e=>e.chapter_number===r),H=A>0?_[A-1]:void 0,G=A<_.length-1?_[A+1]:void 0;return(0,s.jsx)(p.Container,{size:"sm",py:"xl",mih:"100vh",children:(0,s.jsxs)(d.Stack,{gap:"xl",children:[(0,s.jsx)(T.oq,{href:"/novels/".concat(t),label:"소설로 돌아가기"}),(0,s.jsxs)(m.Box,{pb:"xl",style:{borderBottom:"1px solid var(--color-border)"},children:[(0,s.jsx)(g.Text,{fw:500,size:"sm",mb:"xs",children:o.title}),(0,s.jsx)(j.Title,{order:1,fw:400,size:"h2",mb:"md",children:u.title||"".concat(u.chapter_number,"장")}),u.published_at&&(0,s.jsx)(g.Text,{size:"xs",c:"dimmed",children:new Date(u.published_at).toLocaleDateString("ko-KR")})]}),(0,s.jsx)(v.TypographyStylesProvider,{children:(0,s.jsx)(l.oz,{remarkPlugins:[i.A],children:u.content})}),(0,s.jsxs)(h.Group,{justify:"space-between",gap:"md",py:"xl",children:[H?(0,s.jsx)(w.Button,{component:a(),href:"/novels/".concat(t,"/").concat(H.chapter_number),variant:"subtle",size:"sm",leftSection:(0,s.jsx)(S.A,{size:16}),children:"이전장"}):(0,s.jsx)(m.Box,{}),G?(0,s.jsx)(w.Button,{component:a(),href:"/novels/".concat(t,"/").concat(G.chapter_number),variant:"subtle",size:"sm",rightSection:(0,s.jsx)(z.A,{size:16}),children:"다음장"}):(0,s.jsx)(m.Box,{})]})]})})}function L(e){let{slug:t,chapterNumber:r}=e;return t&&r?(0,s.jsx)(B,{slug:t,chapterNumber:r}):t?(0,s.jsx)(k,{slug:t}):(0,s.jsx)(C,{})}},54884:(e,t,r)=>{Promise.resolve().then(r.bind(r,52452))}},e=>{e.O(0,[4092,2545,641,6778,4256,5373,8098,2619,6478,9137,2068,2141,8872,2883,1163,8441,1255,7358],()=>e(e.s=54884)),_N_E=e.O()}]);