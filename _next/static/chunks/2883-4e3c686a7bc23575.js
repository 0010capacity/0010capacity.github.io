"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2883],{896:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(95155),a=r(12115);function l(){let e=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t,r=e.current;if(!r)return;r.style.position="fixed",r.style.top="0",r.style.right="0",r.style.bottom="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.pointerEvents="none",r.style.zIndex="999";let n=r.getContext("2d",{alpha:!0});if(!n)return;let a=[],l=()=>{let e=window.devicePixelRatio||1;r.width=Math.floor(window.innerWidth*e),r.height=Math.floor(window.innerHeight*e),n.setTransform(e,0,0,e,0,0)},i=()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.floor(e*t/15e3);a=[];for(let n=0;n<r;n++)a.push({x:Math.random()*e,y:Math.random()*t,radius:2*Math.random()+1,speed:.5*Math.random()+.2,opacity:.3*Math.random()+.1,drift:.5*Math.random()-.25})},o=()=>{let e=window.innerWidth,r=window.innerHeight;n.clearRect(0,0,e,r),a.forEach(t=>{n.beginPath(),n.arc(t.x,t.y,t.radius,0,2*Math.PI),n.fillStyle="rgba(255, 255, 255, ".concat(t.opacity,")"),n.fill(),t.y+=t.speed,t.x+=t.drift+.3*Math.sin(.01*t.y),t.y>r&&(t.y=-t.radius,t.x=Math.random()*e),t.x>e?t.x=0:t.x<0&&(t.x=e)}),t=requestAnimationFrame(o)};l(),i(),o();let s=()=>{l(),i()};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(t)}},[]),(0,n.jsx)("canvas",{ref:e,"aria-hidden":"true"})}},35864:(e,t,r)=>{r.d(t,{default:()=>E});var n=r(95155),a=r(12115),l=r(82267),i=r(45923),o=r(67623),s=r(58380),c=r(70305),d=r(63652),u=r(82726),h=r(2369),m=r(67661),x=r(33998),p=r(37354),f=r(97624),g=r(99975),w=r(53511),b=r(85921),v=r(90088),y=r(49642),k=r(89652),j=r(2068),C=r(77247),S=r(35130),A=r(16253),z=r(80003);let I="music-player-collapsed";function E(){var e;let[t,r]=(0,a.useState)(!1),[E,M]=(0,a.useState)(!1),[R,P]=(0,a.useState)(!1),{isPlaying:F,isLoaded:B,currentSongIndex:D,volume:T,repeatMode:W}=(0,l.Rl)(),{togglePlay:L,playNext:q,playPrev:N,selectSong:_,toggleRepeatMode:G,setVolume:H}=(0,l.oc)(),{isEnabled:V,toggle:J}=(0,i.W)(),U=null!=(e=l.Fd[D])?e:l.Fd[0];(0,a.useEffect)(()=>{"true"===localStorage.getItem(I)&&r(!0)},[]);let Y=(0,a.useCallback)(()=>{r(e=>{let t=!e;return localStorage.setItem(I,String(t)),t&&(M(!1),P(!1)),t})},[]),K=(0,a.useCallback)(e=>{_(e),M(!1)},[_]),O=(0,a.useCallback)(e=>{H(e/100)},[H]);return t?(0,n.jsx)(o.Box,{pos:"fixed",bottom:16,right:16,style:{zIndex:1e3},children:(0,n.jsx)(s.ActionIcon,{onClick:Y,size:"xl",radius:"xl",color:"dark",variant:"filled",style:{boxShadow:"var(--mantine-shadow-xl)",border:"1px solid var(--mantine-color-dark-4)"},"aria-label":"플레이어 열기",title:"플레이어 열기",children:F?(0,n.jsx)(o.Box,{w:12,h:12,bg:"green.5",style:{borderRadius:"50%"}}):(0,n.jsx)(p.A,{size:20})})}):(0,n.jsxs)(o.Box,{pos:"fixed",bottom:16,right:16,style:{zIndex:1e3},children:[(0,n.jsx)(c.Text,{size:"xs",c:"dimmed",ta:"center",mb:8,style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:null==U?void 0:U.title}),(0,n.jsx)(d.Transition,{transition:"slide-up",mounted:E,duration:200,children:e=>(0,n.jsxs)(u.Paper,{shadow:"xl",radius:"md",withBorder:!0,p:"xs",pos:"absolute",bottom:70,right:0,w:200,style:e,bg:"dark.7",children:[(0,n.jsx)(c.Text,{size:"xs",c:"dimmed",tt:"uppercase",fw:700,mb:4,px:8,children:"Playlist"}),(0,n.jsx)(h.Stack,{gap:2,mah:200,style:{overflowY:"auto"},children:l.Fd.map((e,t)=>(0,n.jsx)(o.Box,{component:"button",onClick:()=>K(t),p:8,style:{textAlign:"left",borderRadius:"var(--mantine-radius-sm)",backgroundColor:t===D?"var(--mantine-color-dark-5)":"transparent",color:t===D?"var(--mantine-color-white)":"var(--mantine-color-dimmed)",border:"none",cursor:"pointer",fontSize:"var(--mantine-font-size-sm)",transition:"background-color 0.2s"},children:(0,n.jsxs)(m.Group,{gap:"xs",wrap:"nowrap",children:[t===D&&F&&(0,n.jsx)(o.Box,{w:8,h:8,bg:"green.5",style:{borderRadius:"50%"}}),(0,n.jsx)(c.Text,{size:"sm",truncate:!0,children:e.title})]})},e.id))})]})}),(0,n.jsx)(d.Transition,{transition:"slide-up",mounted:R,duration:200,children:e=>(0,n.jsx)(u.Paper,{shadow:"xl",radius:"md",withBorder:!0,p:"md",pos:"absolute",bottom:70,right:48,w:150,style:e,bg:"dark.7",children:(0,n.jsx)(x.Slider,{value:100*T,onChange:O,size:"sm",color:"gray",label:e=>"".concat(e.toFixed(0),"%")})})}),(0,n.jsx)(u.Paper,{radius:"xl",withBorder:!0,p:6,shadow:"lg",bg:"dark.8",style:{backdropFilter:"blur(4px)"},children:(0,n.jsxs)(m.Group,{gap:4,children:[(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:"dimmed",onClick:Y,title:"플레이어 접기",children:(0,n.jsx)(f.A,{size:16})}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:"dimmed",onClick:N,title:"이전 곡",children:(0,n.jsx)(g.A,{size:16})}),(0,n.jsx)(s.ActionIcon,{variant:"filled",color:"dark.4",radius:"xl",size:"lg",onClick:L,disabled:!B,title:F?"일시정지":"재생",children:F?(0,n.jsx)(w.A,{size:16,fill:"white"}):(0,n.jsx)(b.A,{size:16,fill:"white"})}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:"dimmed",onClick:q,title:"다음 곡",children:(0,n.jsx)(v.A,{size:16})}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:"one"===W?"green":"dimmed",onClick:G,title:"one"===W?"한 곡 반복":"전체 반복",children:"one"===W?(0,n.jsx)(y.A,{size:16}):(0,n.jsx)(k.A,{size:16})}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:R?"white":"dimmed",onClick:()=>{P(!R),M(!1)},title:"볼륨",children:0===T?(0,n.jsx)(j.A,{size:16}):T<.5?(0,n.jsx)(C.A,{size:16}):(0,n.jsx)(S.A,{size:16})}),(0,n.jsx)(o.Box,{w:1,h:20,bg:"dark.4",mx:4}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:V?"white":"dimmed",onClick:J,title:V?"눈 효과 끄기":"눈 효과 켜기",children:(0,n.jsx)(A.A,{size:16})}),(0,n.jsx)(s.ActionIcon,{variant:"transparent",color:E?"white":"dimmed",onClick:()=>{M(!E),P(!1)},title:"재생목록",children:(0,n.jsx)(z.A,{size:16})})]})})]})}},45923:(e,t,r)=>{r.d(t,{SnowfallProvider:()=>s,W:()=>o});var n=r(95155),a=r(12115);let l="snowfall-enabled",i=(0,a.createContext)({isEnabled:!0,toggle:()=>{}});function o(){return(0,a.useContext)(i)}function s(e){let{children:t}=e,[r,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem(l);null!==e&&o("true"===e)},[]);let s=(0,a.useCallback)(()=>{o(e=>{let t=!e;return localStorage.setItem(l,String(t)),t})},[]);return(0,n.jsx)(i.Provider,{value:{isEnabled:r,toggle:s},children:t})}},82267:(e,t,r)=>{r.d(t,{Fd:()=>d,MusicPlayerProvider:()=>p,Rl:()=>h,oc:()=>x});var n=r(95155),a=r(12115),l=r(29060),i=r(65970),o=r(25959);let s="music-player-volume",c="music-player-repeat-mode",d=[{id:"mast-in-the-mist",title:"Mast in the Mist",url:"/music/mast-in-the-mist.mid"},{id:"wind-ahead",title:"Wind Ahead",url:"/music/wind-ahead.mid"}],u=["square","sawtooth","triangle","sine"],h=(0,o.v)(e=>({isPlaying:!1,isLoaded:!1,currentSongIndex:0,volume:.5,repeatMode:"all",setIsPlaying:t=>e({isPlaying:t}),setIsLoaded:t=>e({isLoaded:t}),setCurrentSongIndex:t=>e({currentSongIndex:t}),setVolume:t=>e({volume:t}),setRepeatMode:t=>e({repeatMode:t})})),m=(0,a.createContext)(null);function x(){let e=(0,a.useContext)(m);if(!e)throw Error("useMusicPlayer must be used within MusicPlayerProvider");return e}function p(e){let{children:t}=e,r=(0,a.useRef)([]),o=(0,a.useRef)([]),x=(0,a.useRef)([]),p=(0,a.useRef)(null),f=(0,a.useRef)(null),g=(0,a.useRef)(!1),w=(0,a.useRef)(!1),b=(0,a.useRef)(!1),{isPlaying:v,currentSongIndex:y,volume:k,setIsPlaying:j,setIsLoaded:C,setCurrentSongIndex:S,setVolume:A,setRepeatMode:z}=h();(0,a.useEffect)(()=>{if(w.current)return;w.current=!0;let e=localStorage.getItem(s);if(e){let t=parseFloat(e);!isNaN(t)&&t>=0&&t<=1&&A(t)}let t=localStorage.getItem(c);("one"===t||"all"===t)&&z(t)},[A,z]);let I=(0,a.useCallback)(()=>{let e=d[y];return e||d[0]},[y]),E=(0,a.useCallback)((e,t)=>{let r=u[e%u.length]||"square";f.current||(f.current=new l.fS(0).toDestination());let n=new l.dJ({frequency:2e3,type:"lowpass",rolloff:-12}).connect(f.current),a=new l.Bh(l.RG,{oscillator:{type:r},envelope:{attack:.05,decay:.15,sustain:.4,release:.4}}).connect(n);return a.volume.value=l.F4(t),{synth:a,filter:n}},[]),M=(0,a.useCallback)(()=>{l.oD().stop(),l.oD().cancel(),l.oD().position=0,x.current.forEach(e=>{e.stop(),e.dispose()}),r.current.forEach(e=>e.dispose()),o.current.forEach(e=>e.dispose()),x.current=[],r.current=[],o.current=[]},[]),R=(0,a.useCallback)(async e=>{M(),C(!1);try{return p.current=await i.Midi.fromUrl(e),C(!0),!0}catch(e){return!1}},[M,C]),P=(0,a.useCallback)(async()=>{var e;let t=p.current;if(!t)return;"running"!==l.SD().state&&await l.ni(),M(),l.oD().bpm.value=(null==(e=t.header.tempos[0])?void 0:e.bpm)||120;let n=0;t.tracks.forEach(e=>{e.notes.forEach(e=>{let t=e.time+e.duration;t>n&&(n=t)})}),t.tracks.forEach((e,t)=>{if(0===e.notes.length)return;let{synth:a,filter:i}=E(t,0===t?.6:2===t?.45:.3);r.current.push(a),o.current.push(i);let s=e.notes.map(e=>({time:e.time,note:e.name,duration:e.duration,velocity:e.velocity})),c=new l.eS((e,t)=>{a.triggerAttackRelease(t.note,t.duration,e,t.velocity)},s);c.loop=!0,c.loopEnd=n,c.start(0),x.current.push(c)}),l.oD().start(),j(!0)},[M,E,j]),F=(0,a.useCallback)(()=>{l.oD().pause(),j(!1)},[j]),B=(0,a.useCallback)(async()=>{v?F():"paused"===l.oD().state&&x.current.length>0?(l.oD().start(),j(!0)):await P()},[v,P,F,j]),D=(0,a.useCallback)(()=>{g.current=v,S((y+1)%d.length)},[y,v,S]),T=(0,a.useCallback)(()=>{g.current=v,S((y-1+d.length)%d.length)},[y,v,S]),W=(0,a.useCallback)(e=>{g.current=v,S(e)},[v,S]),L=(0,a.useCallback)(()=>{let e="one"===h.getState().repeatMode?"all":"one";z(e),localStorage.setItem(c,e)},[z]),q=(0,a.useCallback)(e=>{if(A(e),f.current){let t=0===e?-1/0:l.F4(e);f.current.volume.value=t}localStorage.setItem(s,e.toString())},[A]);return(0,a.useEffect)(()=>{let e=I();(async()=>{await R(e.url)&&(g.current||b.current)&&(b.current=!1,await P())})()},[y]),(0,a.useEffect)(()=>{if(f.current){let e=0===k?-1/0:l.F4(k);f.current.volume.value=e}},[k]),(0,a.useEffect)(()=>()=>{M(),f.current&&(f.current.dispose(),f.current=null)},[M]),(0,n.jsx)(m.Provider,{value:{togglePlay:B,playNext:D,playPrev:T,selectSong:W,toggleRepeatMode:L,setVolume:q},children:t})}}}]);